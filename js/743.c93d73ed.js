"use strict";(globalThis["webpackChunk_5e_monster_maker"]=globalThis["webpackChunk_5e_monster_maker"]||[]).push([[743],{9403:(e,t,l)=>{l.r(t),l.d(t,{default:()=>Oo});var a=l(9835);const o={id:"editor",class:"q-pa-md",style:{width:"100%"}},n={class:"q-pa-md"};function s(e,t,l,s,i,r){const d=(0,a.up)("basics-editor"),c=(0,a.up)("saves-editor"),m=(0,a.up)("speeds-editor"),u=(0,a.up)("skills-editor"),p=(0,a.up)("senses-editor"),k=(0,a.up)("resistances-editor"),b=(0,a.up)("traits-editor"),g=(0,a.up)("spellcasting-editor"),f=(0,a.up)("attacks-editor"),w=(0,a.up)("actions-editor"),v=(0,a.up)("multiattack-editor"),y=(0,a.up)("reactions-editor"),_=(0,a.up)("legendary-actions-editor"),W=(0,a.up)("mythic-actions-editor"),C=(0,a.up)("lair-actions-editor"),q=(0,a.up)("regional-effects-editor"),$=(0,a.up)("q-list"),h=(0,a.up)("web-renderer"),Z=(0,a.up)("q-splitter"),V=(0,a.up)("q-page");return(0,a.wg)(),(0,a.j4)(V,{class:"row items-start"},{default:(0,a.w5)((()=>[(0,a.Wm)(Z,{id:"splitter",modelValue:e.splitterModel,"onUpdate:modelValue":t[0]||(t[0]=t=>e.splitterModel=t),style:{height:"calc(100vh - 177px)",width:"100%"}},{before:(0,a.w5)((()=>[(0,a._)("div",o,[(0,a.Wm)($,{bordered:"",separator:"",class:"rounded-borders"},{default:(0,a.w5)((()=>[(0,a.Wm)(d),(0,a.Wm)(c),(0,a.Wm)(m),(0,a.Wm)(u),(0,a.Wm)(p),(0,a.Wm)(k),(0,a.Wm)(b),(0,a.Wm)(g),(0,a.Wm)(f),(0,a.Wm)(w),(0,a.Wm)(v),(0,a.Wm)(y),(0,a.Wm)(_),(0,a.Wm)(W),(0,a.Wm)(C),(0,a.Wm)(q)])),_:1})])])),after:(0,a.w5)((()=>[(0,a._)("div",n,[(0,a.Wm)(h,{id:"renderer"})])])),_:1},8,["modelValue"])])),_:1})}var i=l(2577),r=l(499),d=l(6970);const c={class:"row"};function m(e,t,l,o,n,s){const i=(0,a.up)("q-input"),r=(0,a.up)("q-select"),m=(0,a.up)("lock-toggle-button"),u=(0,a.up)("q-tooltip"),p=(0,a.up)("q-btn"),k=(0,a.up)("q-card"),b=(0,a.up)("q-expansion-item");return(0,a.wg)(),(0,a.j4)(b,{"expand-separator":"","default-opened":"",icon:"info",label:e.$t("editor.basics.label"),caption:e.$t("editor.basics.caption")},{default:(0,a.w5)((()=>[(0,a.Wm)(k,null,{default:(0,a.w5)((()=>[(0,a._)("div",c,[(0,a.Wm)(i,{modelValue:e.monster.name,"onUpdate:modelValue":t[0]||(t[0]=t=>e.monster.name=t),label:e.$t("monster.name"),class:"q-pa-sm col-7",debounce:"500"},null,8,["modelValue","label"]),(0,a.Wm)(r,{"model-value":e.monster.CR,options:e.crValues,"display-value":e.crValues[e.monster.CR].label,"emit-value":"",label:e.$t("monster.cr"),class:"col-2 q-pa-sm","onUpdate:modelValue":e.monster.setCR},null,8,["model-value","options","display-value","label","onUpdate:modelValue"]),(0,a.Wm)(i,{"model-value":e.monster.proficiency,type:"number",label:e.$t("monster.proficiencyBonus"),class:"col-3 q-pa-sm",disable:!e.monster.proficiencyOverride,"onUpdate:modelValue":t[1]||(t[1]=t=>e.monster.proficiency=e.validateNumber(t,0))},{after:(0,a.w5)((()=>[(0,a.Wm)(m,{locked:!e.monster.proficiencyOverride,"lock-tooltip":e.$t("monster.proficiency.unlockFromCr"),"unlock-tooltip":e.$t("monster.proficiency.lockToCr"),onClick:e.monster.toggleProficiencyOverride},null,8,["locked","lock-tooltip","unlock-tooltip","onClick"])])),_:1},8,["model-value","label","disable"]),(0,a.Wm)(r,{"model-value":e.monster.size,options:e.sizeValues,label:e.$t("monster.size"),class:"col-2 q-pa-sm","onUpdate:modelValue":e.monster.setSize},null,8,["model-value","options","label","onUpdate:modelValue"]),(0,a.Wm)(r,{modelValue:e.monster.type,"onUpdate:modelValue":t[2]||(t[2]=t=>e.monster.type=t),options:e.typeOptions,"use-input":"","input-debounce":"0",label:e.$t("monster.type"),class:"col-6 q-pa-sm","new-value-mode":"add-unique",onFilter:e.typeFilter},null,8,["modelValue","options","label","onFilter"]),(0,a.Wm)(r,{modelValue:e.monster.alignment,"onUpdate:modelValue":t[3]||(t[3]=t=>e.monster.alignment=t),options:e.alignmentOptions,"input-debounce":"0","use-input":"",label:e.$t("monster.alignment"),class:"col-4 q-pa-sm","new-value-mode":"add-unique",onFilter:e.alignmentFilter},null,8,["modelValue","options","label","onFilter"]),(0,a.Wm)(i,{"model-value":e.monster.AC,type:"number",label:e.$t("monster.ac"),min:"0",class:"col-2 q-pa-sm","onUpdate:modelValue":t[4]||(t[4]=t=>e.monster.AC=e.validateNumber(t,0))},{after:(0,a.w5)((()=>[(0,a.Wm)(p,{round:"",color:"primary",size:"md",icon:"auto_fix_high",onClick:e.monster.setAcByCr},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{class:"text-body2"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,d.zw)(e.$t("monster.setAcByCr")),1)])),_:1})])),_:1},8,["onClick"])])),_:1},8,["model-value","label"]),(0,a.Wm)(i,{modelValue:e.monster.ACType,"onUpdate:modelValue":t[5]||(t[5]=t=>e.monster.ACType=t),label:e.$t("monster.acType"),class:"col-4 q-pa-sm"},null,8,["modelValue","label"]),(0,a.Wm)(i,{"model-value":e.monster.HP.HD,type:"number",label:e.$t("monster.hp.hd"),min:"0",class:"col-2 q-pa-sm","onUpdate:modelValue":t[6]||(t[6]=t=>e.monster.setHpModifier(t,e.monster.stats.CON))},{after:(0,a.w5)((()=>[(0,a.Wm)(p,{round:"",color:"primary",size:"md",icon:"auto_fix_high",onClick:e.monster.setHdByCr},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{class:"text-body2"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,d.zw)(e.$t("monster.setHdByCr")),1)])),_:1})])),_:1},8,["onClick"])])),_:1},8,["model-value","label"]),(0,a.Wm)(r,{modelValue:e.monster.HP.type,"onUpdate:modelValue":t[7]||(t[7]=t=>e.monster.HP.type=t),options:e.diceOptions,"emit-value":"","display-value":e.diceLookup[e.monster.HP.type],label:e.$t("monster.hp.type"),class:"col-2 q-pa-sm",disable:!e.monster.hpDieTypeOverride},{after:(0,a.w5)((()=>[(0,a.Wm)(m,{locked:!e.monster.hpDieTypeOverride,"lock-tooltip":e.$t("monster.hp.unlockFromSize"),"unlock-tooltip":e.$t("monster.hp.lockToSize"),onClick:e.monster.toggleDieTypeOverride},null,8,["locked","lock-tooltip","unlock-tooltip","onClick"])])),_:1},8,["modelValue","options","display-value","label","disable"]),(0,a.Wm)(i,{"model-value":e.monster.HP.modifier,disable:!e.monster.hpModifierOverride,type:"number",label:e.$t("monster.hp.modifier"),class:"col-2 q-pa-sm","onUpdate:modelValue":t[8]||(t[8]=t=>e.monster.HP.modifier=e.validateNumber(t,0))},{after:(0,a.w5)((()=>[(0,a.Wm)(m,{locked:!e.monster.hpModifierOverride,"lock-tooltip":e.$t("monster.hp.unlockModifier"),"unlock-tooltip":e.$t("monster.hp.lockModifier"),onClick:e.monster.toggleHpModifierOverride},null,8,["locked","lock-tooltip","unlock-tooltip","onClick"])])),_:1},8,["model-value","disable","label"]),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.statKeys,(t=>((0,a.wg)(),(0,a.j4)(i,{key:t,"model-value":e.monster.stats[t],type:"number",label:e.$t(`monster.stat.${t}`),class:"col-2 q-pa-sm","onUpdate:modelValue":l=>e.updateStat(t,l)},null,8,["model-value","label","onUpdate:modelValue"])))),128)),(0,a.Wm)(i,{modelValue:e.monster.languages,"onUpdate:modelValue":t[9]||(t[9]=t=>e.monster.languages=t),label:e.$t("monster.languages"),class:"col-12 q-pa-sm"},null,8,["modelValue","label"])])])),_:1})])),_:1},8,["label","caption"])}const u=["unaligned","lawful good","neutral good","chaotic good","lawful neutral","neutral","chaotic neutral","lawful evil","neutral evil","chaotic evil"];var p=l(9657),k=l(229),b=l(8407);const g=["aberration","beast","celestial","construct","dragon","elemental","fey","fiend","giant","humanoid","monstrosity","ooze","plant","undead"];var f=l(3255);function w(e,t,l,o,n,s){const i=(0,a.up)("q-tooltip"),r=(0,a.up)("q-btn");return(0,a.wg)(),(0,a.j4)(r,{push:"",icon:e.locked?"lock":"lock_open",color:e.locked?"dark":"warning",size:"md"},{default:(0,a.w5)((()=>[(0,a.Wm)(i,{class:"text-body2"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,d.zw)(e.locked?e.lockTooltip:e.unlockTooltip),1)])),_:1})])),_:1},8,["icon","color"])}const v=(0,a.aZ)({name:"LockToggleButton",props:{locked:{type:Boolean,required:!0},lockTooltip:{type:String,required:!0},unlockTooltip:{type:String,required:!0}}});var y=l(1639),_=l(8879),W=l(6858),C=l(9984),q=l.n(C);const $=(0,y.Z)(v,[["render",w]]),h=$;q()(v,"components",{QBtn:_.Z,QTooltip:W.Z});var Z=l(7445);const V=(0,a.aZ)({name:"BasicsEditor",components:{LockToggleButton:h},setup(){const e=(0,i.B)(),t=(0,r.iH)(g),l=(0,r.iH)(u),a=k.m1,o=k.cY,n=Object.keys(e.stats),s=(0,f.B0)(g,t),d=(0,f.B0)(u,l),c=function(t,l){"CON"===t?e.setHpModifier(e.HP.HD,l):e.stats[t]=parseInt(`${l}`)};return{monster:e,crValues:p.R4,sizeValues:b.Y,typeOptions:t,typeFilter:s,alignmentOptions:l,alignmentFilter:d,diceOptions:a,diceLookup:o,statKeys:n,updateStat:c,validateNumber:Z.m}}});var U=l(651),D=l(4458),A=l(3119),x=l(6384);const Q=(0,y.Z)(V,[["render",m]]),T=Q;q()(V,"components",{QExpansionItem:U.Z,QCard:D.Z,QInput:A.Z,QSelect:x.Z,QBtn:_.Z,QTooltip:W.Z});var S=l(1957);const z=e=>((0,a.dD)("data-v-4c63463b"),e=e(),(0,a.Cn)(),e),F={class:"monster-name"},H={class:"type"},O=z((()=>(0,a._)("hr",null,null,-1))),L={class:"skill"},M=z((()=>(0,a._)("span",{class:"name"},"Armor Class",-1))),E={class:"skill"},I=z((()=>(0,a._)("span",{class:"name"},"Hit Points",-1))),P={class:"skill"},B=z((()=>(0,a._)("span",{class:"name"},"Speed",-1))),N=z((()=>(0,a._)("hr",null,null,-1))),R={class:"row",style:{width:"100%"}},j={class:"stat-name"},K={class:"stat"},Y={class:"score"},G={class:"modifier"},X=z((()=>(0,a._)("hr",null,null,-1))),J={class:"skill"},ee=z((()=>(0,a._)("span",{class:"name"},"Saving Throws",-1))),te={class:"skill"},le=z((()=>(0,a._)("span",{class:"name"},"Skills",-1))),ae={class:"skill"},oe=z((()=>(0,a._)("span",{class:"name"},"Damage Resistances",-1))),ne={class:"skill"},se=z((()=>(0,a._)("span",{class:"name"},"Damage Immunities",-1))),ie={class:"skill"},re=z((()=>(0,a._)("span",{class:"name"},"Damage Vulnerabilities",-1))),de={class:"skill"},ce=z((()=>(0,a._)("span",{class:"name"},"Condition Immunities",-1))),me={class:"skill"},ue=z((()=>(0,a._)("span",{class:"name"},"Senses",-1))),pe={class:"skill"},ke=z((()=>(0,a._)("span",{class:"name"},"Languages",-1))),be={class:"skill"},ge=z((()=>(0,a._)("span",{class:"name"},"Challenge",-1))),fe={style:{float:"right"}},we=z((()=>(0,a._)("b",null,"Proficiency Bonus",-1))),ve=z((()=>(0,a._)("hr",null,null,-1))),ye={class:"traits"},_e=["innerHTML"],We=["innerHTML"],Ce={class:"section"},qe={key:0,class:"multiattack"},$e={class:"name"},he=["innerHTML"],Ze={class:"other-actions"},Ve=["innerHTML"],Ue={key:1,class:"innate-spellcasting"},De=["innerHTML"],Ae={class:"spell-list"},xe={class:"spell-label"},Qe={class:"spell-list-entries"},Te={key:2,class:"spellcasting"},Se=["innerHTML"],ze={class:"spell-list"},Fe={key:0,class:"spell-row"},He={class:"spell-label"},Oe={class:"spell-list-entries"},Le={key:1},Me={class:"spell-row"},Ee={class:"spell-label"},Ie={class:"spell-list-entries"},Pe={class:"spell-label"},Be={class:"spell-list-entries"},Ne={key:3,class:"legendary-actions"},Re={class:"section"},je=["innerHTML"],Ke=["innerHTML"],Ye={key:4,class:"mythic-actions"},Ge={class:"section"},Xe=["innerHTML"],Je=["innerHTML"],et={key:5,class:"reactions"},tt={class:"section"},lt=["innerHTML"],at={key:6,class:"lair-actions"},ot={class:"section"},nt=["innerHTML"],st=["innerHTML"],it={key:7,class:"regional-effects"},rt={class:"section"},dt=["innerHTML"],ct=["innerHTML"];function mt(e,t,l,o,n,s){return(0,a.wg)(),(0,a.iD)("div",{id:"render",class:"statblock",style:(0,d.j5)(e.columns)},[(0,a._)("h2",F,(0,d.zw)(e.monster.name),1),(0,a._)("div",H,(0,d.zw)(e.monster.size)+" "+(0,d.zw)(e.monster.type)+", "+(0,d.zw)(e.monster.alignment),1),O,(0,a._)("div",L,[M,(0,a.Uk)(" "+(0,d.zw)(e.monster.AC)+(0,d.zw)(""===e.monster.ACType?"":` (${e.monster.ACType})`),1)]),(0,a._)("div",E,[I,(0,a.Uk)(" "+(0,d.zw)(e.hp),1)]),(0,a._)("div",P,[B,(0,a.Uk)(" "+(0,d.zw)(e.speeds),1)]),N,(0,a._)("div",R,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.stats,(e=>((0,a.wg)(),(0,a.iD)("div",{key:e.stat,class:"stat-container"},[(0,a._)("div",j,(0,d.zw)(e.stat),1),(0,a._)("div",K,[(0,a._)("div",Y,(0,d.zw)(e.score),1),(0,a._)("div",G,"("+(0,d.zw)(e.renderedModifier)+")",1)])])))),128))]),X,(0,a.wy)((0,a._)("div",J,[ee,(0,a.Uk)(" "+(0,d.zw)(e.saves),1)],512),[[S.F8,""!==e.saves]]),(0,a.wy)((0,a._)("div",te,[le,(0,a.Uk)(" "+(0,d.zw)(e.skills),1)],512),[[S.F8,e.monster.skills.length>0]]),(0,a.wy)((0,a._)("div",ae,[oe,(0,a.Uk)(" "+(0,d.zw)(e.resistances),1)],512),[[S.F8,e.monster.resistances&&e.monster.resistances.length>0]]),(0,a.wy)((0,a._)("div",ne,[se,(0,a.Uk)(" "+(0,d.zw)(e.immunities),1)],512),[[S.F8,e.monster.immunities&&e.monster.immunities.length>0]]),(0,a.wy)((0,a._)("div",ie,[re,(0,a.Uk)(" "+(0,d.zw)(e.vulnerabilities),1)],512),[[S.F8,e.monster.vulnerabilities&&e.monster.vulnerabilities.length>0]]),(0,a.wy)((0,a._)("div",de,[ce,(0,a.Uk)(" "+(0,d.zw)(e.conditions),1)],512),[[S.F8,e.monster.conditions&&e.monster.conditions.length>0]]),(0,a._)("div",me,[ue,(0,a.Uk)(" "+(0,d.zw)(e.senses),1)]),(0,a._)("div",pe,[ke,(0,a.Uk)(" "+(0,d.zw)(""!==e.monster.languages?e.monster.languages:"â€”"),1)]),(0,a._)("div",be,[ge,(0,a.Uk)(" "+(0,d.zw)(e.cr)+" ",1),(0,a._)("span",fe,[we,(0,a.Uk)(" +"+(0,d.zw)(e.monster.proficiency),1)])]),ve,(0,a._)("div",ye,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.traits,((e,t)=>((0,a.wg)(),(0,a.iD)("div",{key:t,class:"trait",innerHTML:e},null,8,_e)))),128)),e.monster.mythicActions.actions.length>0?((0,a.wg)(),(0,a.iD)("div",{key:0,class:"trait",innerHTML:e.mythicTrait},null,8,We)):(0,a.kq)("",!0)]),(0,a._)("h3",Ce,(0,d.zw)(e.$t("editor.action.label")),1),e.monster.multiattacks.length>0?((0,a.wg)(),(0,a.iD)("div",qe,[(0,a._)("span",$e,(0,d.zw)(e.$t("editor.multiattack.label"))+".",1),(0,a.Uk)(" "+(0,d.zw)(e.multiattacks),1)])):(0,a.kq)("",!0),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.attacks,((e,t)=>((0,a.wg)(),(0,a.iD)("div",{key:t,class:"attack",innerHTML:e},null,8,he)))),128)),(0,a._)("div",Ze,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.actions,((e,t)=>((0,a.wg)(),(0,a.iD)("div",{key:t,class:"action",innerHTML:e},null,8,Ve)))),128))]),e.monster.spellcasting.atWill.length>0?((0,a.wg)(),(0,a.iD)("div",Ue,[(0,a._)("div",{innerHTML:e.sanitizedInnateSpellcastingPreamble},null,8,De),(0,a._)("div",Ae,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.innateSpellcastingLists,(e=>((0,a.wg)(),(0,a.iD)("div",{key:e.id,class:"spell-row"},[(0,a._)("span",xe,(0,d.zw)(e.renderedLabel)+": ",1),(0,a._)("span",Qe,(0,d.zw)(e.renderedSpells),1)])))),128))])])):(0,a.kq)("",!0),e.monster.spellcasting.standard.length>0?((0,a.wg)(),(0,a.iD)("div",Te,[(0,a._)("div",{innerHTML:e.sanitizedClassSpellcastingPreamble},null,8,Se),(0,a._)("div",ze,[e.monster.knownSpellsOfLevel(0).length>0?((0,a.wg)(),(0,a.iD)("div",Fe,[(0,a._)("span",He,(0,d.zw)(e.$t("editor.spellcasting.slot.cantripLabel"))+": ",1),(0,a._)("span",Oe,(0,d.zw)(e.monster.knownSpellsOfLevel(0).join(", ")),1)])):(0,a.kq)("",!0),"Warlock"===e.monster.spellcasting.class?((0,a.wg)(),(0,a.iD)("div",Le,[(0,a._)("div",Me,[(0,a._)("span",Ee,(0,d.zw)(e.classSpellcastingWarlockLabel)+": ",1),(0,a._)("span",Ie,(0,d.zw)(e.monster.spellcasting.standard.join(", ")),1)])])):((0,a.wg)(!0),(0,a.iD)(a.HY,{key:2},(0,a.Ko)(e.classSpellcastingSlots,(e=>((0,a.wg)(),(0,a.iD)("div",{key:e.level,class:"spell-row"},[(0,a._)("span",Pe,(0,d.zw)(e.renderedLabel),1),(0,a._)("span",Be,(0,d.zw)(e.renderedSpells),1)])))),128))])])):(0,a.kq)("",!0),e.monster.legendaryActions.count>0?((0,a.wg)(),(0,a.iD)("div",Ne,[(0,a._)("h3",Re,(0,d.zw)(e.$t("editor.legendary.label")),1),(0,a._)("div",{class:"preamble",innerHTML:e.legendaryPreamble},null,8,je),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.legendaryActions,((e,t)=>((0,a.wg)(),(0,a.iD)("div",{key:t,class:"action legendary",innerHTML:e},null,8,Ke)))),128))])):(0,a.kq)("",!0),e.monster.mythicActions.actions.length>0?((0,a.wg)(),(0,a.iD)("div",Ye,[(0,a._)("h3",Ge,(0,d.zw)(e.$t("editor.mythic.label")),1),(0,a._)("div",{class:"preamble",innerHTML:e.mythicPreamble},null,8,Xe),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.mythicActions,((e,t)=>((0,a.wg)(),(0,a.iD)("div",{key:t,class:"action legendary",innerHTML:e},null,8,Je)))),128))])):(0,a.kq)("",!0),e.monster.reactions.length>0?((0,a.wg)(),(0,a.iD)("div",et,[(0,a._)("h3",tt,(0,d.zw)(e.$t("editor.reaction.label")),1),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.reactions,((e,t)=>((0,a.wg)(),(0,a.iD)("div",{key:t,class:"action reaction",innerHTML:e},null,8,lt)))),128))])):(0,a.kq)("",!0),e.monster.lairActions.length>0?((0,a.wg)(),(0,a.iD)("div",at,[(0,a._)("h3",ot,(0,d.zw)(e.$t("editor.lair.label")),1),(0,a._)("div",{class:"preamble",innerHTML:e.lairActionPreamble},null,8,nt),(0,a._)("ul",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.lairActions,((e,t)=>((0,a.wg)(),(0,a.iD)("li",{key:t,class:"action lair",innerHTML:e},null,8,st)))),128))])])):(0,a.kq)("",!0),e.monster.regionalEffects.length>0?((0,a.wg)(),(0,a.iD)("div",it,[(0,a._)("h3",rt,(0,d.zw)(e.$t("editor.regional.label")),1),(0,a._)("div",{class:"preamble",innerHTML:e.regionalEffectPreamble},null,8,dt),(0,a._)("ul",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.regionalEffects,((e,t)=>((0,a.wg)(),(0,a.iD)("li",{key:t,class:"action regional",innerHTML:e},null,8,ct)))),128))])])):(0,a.kq)("",!0)],4)}var ut=l(4326),pt=l(8645);const kt=(0,a.aZ)({name:"WebRenderer",setup(){const e=(0,i.B)(),{sanitizeWebString:t}=(0,ut.R)(),l=(0,a.f3)("textRenderer"),o=(0,a.Fl)((()=>l.traits.value.map((e=>t(e))))),n=(0,a.Fl)((()=>t(l.classSpellcastingPreamble.value))),s=(0,a.Fl)((()=>t(l.innateSpellcastingPreamble.value))),r=(0,a.Fl)((()=>l.attacks.value.map((e=>t(e))))),d=(0,a.Fl)((()=>l.actions.value.map((e=>t(e))))),c=(0,a.Fl)((()=>t(l.multiattacks.value))),m=(0,a.Fl)((()=>t(l.legendaryPreamble.value))),u=(0,a.Fl)((()=>l.legendaryActions.value.map((e=>t(e))))),p=(0,a.Fl)((()=>t(l.mythicTrait.value))),k=(0,a.Fl)((()=>t(l.mythicPreamble.value))),b=(0,a.Fl)((()=>l.mythicActions.value.map((e=>t(e))))),g=(0,a.Fl)((()=>l.reactions.value.map((e=>t(e))))),f=(0,a.Fl)((()=>t(l.lairActionPreamble.value))),w=(0,a.Fl)((()=>l.lairActions.value.map((e=>t(e))))),v=(0,a.Fl)((()=>t(l.regionalEffectPreamble.value))),y=(0,a.Fl)((()=>l.regionalEffects.value.map((e=>t(e))))),_=(0,pt.E)(),W=(0,a.Fl)((()=>({columnCount:_.statBlockColumns})));return{monster:e,...l,sanitizedClassSpellcastingPreamble:n,sanitizedInnateSpellcastingPreamble:s,traits:o,attacks:r,actions:d,multiattacks:c,legendaryPreamble:m,legendaryActions:u,mythicTrait:p,mythicPreamble:k,mythicActions:b,reactions:g,lairActionPreamble:f,lairActions:w,regionalEffectPreamble:v,regionalEffects:y,columns:W}}}),bt=(0,y.Z)(kt,[["render",mt],["__scopeId","data-v-4c63463b"]]),gt=bt;function ft(e,t,l,o,n,s){const i=(0,a.up)("q-tooltip"),r=(0,a.up)("q-btn"),c=(0,a.up)("q-btn-group"),m=(0,a.up)("q-input"),u=(0,a.up)("q-card"),p=(0,a.up)("q-expansion-item");return(0,a.wg)(),(0,a.j4)(p,{"expand-separator":"",icon:"fa-solid fa-helmet-safety",label:e.$t("editor.saves.label"),caption:e.$t("editor.saves.caption")},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{class:"row"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.saves,((t,l)=>((0,a.wg)(),(0,a.j4)(m,{key:l,type:"number","model-value":e.saveModifierForStat(e.monster,l),class:"col-sm-12 col-md-4 q-pa-sm",label:e.$t(`monster.stat.${l}`),disable:!t?.override??!0,"onUpdate:modelValue":t=>e.monster.saves[l].overrideValue=e.validateNumber(t,0)},{after:(0,a.w5)((()=>[(0,a.Wm)(c,{push:""},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{push:"",color:e.saves[l].proficient?"positive":"dark",icon:"keyboard_arrow_up",onClick:t=>e.saves[l].proficient=!e.saves[l].proficient},{default:(0,a.w5)((()=>[(0,a.Wm)(i,{class:"text-body2"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,d.zw)(e.$t("editor.proficient")),1)])),_:1})])),_:2},1032,["color","onClick"]),(0,a.Wm)(r,{push:"",color:e.saves[l].override?"warning":"dark",icon:"handyman",onClick:t=>e.saves[l].override=!e.saves[l].override},{default:(0,a.w5)((()=>[(0,a.Wm)(i,{class:"text-body2"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,d.zw)(e.$t("editor.override")),1)])),_:1})])),_:2},1032,["color","onClick"])])),_:2},1024)])),_:2},1032,["model-value","label","disable","onUpdate:modelValue"])))),128))])),_:1})])),_:1},8,["label","caption"])}var wt=l(2392);const vt=(0,a.aZ)({name:"SavesEditor",setup(){const e=(0,i.B)();return{monster:e,saves:e.saves,saveModifierForStat:wt.L0,validateNumber:Z.m}}});var yt=l(7236);const _t=(0,y.Z)(vt,[["render",ft]]),Wt=_t;q()(vt,"components",{QExpansionItem:U.Z,QCard:D.Z,QInput:A.Z,QBtnGroup:yt.Z,QBtn:_.Z,QTooltip:W.Z});const Ct={class:"row",style:{width:"100%"}};function qt(e,t,l,o,n,s){const i=(0,a.up)("q-select"),r=(0,a.up)("q-input"),d=(0,a.up)("q-btn"),c=(0,a.up)("q-card-actions"),m=(0,a.up)("q-card-section"),u=(0,a.up)("q-card"),p=(0,a.up)("q-expansion-item");return(0,a.wg)(),(0,a.j4)(p,{"expand-separator":"",icon:"speed",label:e.$t("editor.speeds.label"),caption:e.$t("editor.speeds.caption")},{default:(0,a.w5)((()=>[(0,a.Wm)(u,null,{default:(0,a.w5)((()=>[(0,a.Wm)(m,{class:"row"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.speeds,(t=>((0,a.wg)(),(0,a.j4)(u,{key:t.id,flat:"",style:{width:"100%"}},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{horizontal:""},{default:(0,a.w5)((()=>[(0,a._)("div",Ct,[(0,a.Wm)(i,{modelValue:t.type,"onUpdate:modelValue":e=>t.type=e,options:e.filteredMovementOptions,"use-input":"","input-debounce":"0",label:e.$t("monster.movement.type.label"),class:"col-3 q-pa-sm","new-value-mode":"add-unique",onFilter:e.movementFilter},null,8,["modelValue","onUpdate:modelValue","options","label","onFilter"]),(0,a.Wm)(r,{"model-value":t.speed,type:"number",label:e.$t("monster.movement.speed"),suffix:"ft",min:"0",step:"5",class:"col-2 q-pa-sm","onUpdate:modelValue":l=>t.speed=e.validateNumber(l,0)},null,8,["model-value","label","onUpdate:modelValue"]),(0,a.Wm)(r,{modelValue:t.note,"onUpdate:modelValue":e=>t.note=e,label:e.$t("monster.movement.note"),class:"col q-pa-sm"},null,8,["modelValue","onUpdate:modelValue","label"])]),(0,a.Wm)(c,{vertical:"",class:"justify-around q-px-md"},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{icon:"delete",round:"",color:"negative",onClick:()=>e.deleteSpeed(t.id)},null,8,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1}),(0,a.Wm)(c,{align:"center"},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{class:"full-width",color:"positive",label:e.$t("editor.addSpeed"),onClick:e.addSpeed},null,8,["label","onClick"])])),_:1})])),_:1})])),_:1},8,["label","caption"])}const $t=["walk","fly","burrow","climb","swim"];var ht=l(7712);const Zt=(0,a.aZ)({name:"SpeedsEditor",setup(){const{t:e}=(0,ht.QT)(),t=(0,i.B)(),l=(0,a.Fl)((()=>$t.map((t=>e(`monster.movement.type.${t}`))))),o=(0,r.iH)(Array.from(l.value)),n=(0,f.B0)(l,o);return{speeds:t.speeds,addSpeed:t.addSpeed,deleteSpeed:t.deleteSpeed,movementFilter:n,filteredMovementOptions:o,validateNumber:Z.m}}});var Vt=l(3190),Ut=l(1821);const Dt=(0,y.Z)(Zt,[["render",qt]]),At=Dt;function xt(e,t,l,o,n,s){const i=(0,a.up)("q-tooltip"),r=(0,a.up)("q-btn"),c=(0,a.up)("q-btn-group"),m=(0,a.up)("q-input"),u=(0,a.up)("q-card-section"),p=(0,a.up)("q-item-label"),k=(0,a.up)("q-item-section"),b=(0,a.up)("q-item"),g=(0,a.up)("q-list"),f=(0,a.up)("q-btn-dropdown"),w=(0,a.up)("q-card-actions"),v=(0,a.up)("q-card"),y=(0,a.up)("q-expansion-item"),_=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.j4)(y,{"expand-separator":"",icon:"fa-solid fa-dice-d20",label:e.$t("editor.skills.label"),caption:e.$t("editor.skills.caption")},{default:(0,a.w5)((()=>[(0,a.Wm)(v,null,{default:(0,a.w5)((()=>[(0,a.Wm)(u,{class:"row"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.skills,(t=>((0,a.wg)(),(0,a.j4)(m,{key:t.key,label:e.$t(`skill.${t.key}`),class:"col-6 q-pa-sm",type:"number","model-value":e.bonusForSkill(e.monster,t),disable:!t.override,"onUpdate:modelValue":e=>t.overrideValue=parseInt(`${e}`)},{after:(0,a.w5)((()=>[(0,a.Wm)(c,{push:""},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{push:"",color:t.proficient?"positive":"dark",icon:"keyboard_arrow_up",onClick:e=>t.proficient=!t.proficient},{default:(0,a.w5)((()=>[(0,a.Wm)(i,{class:"text-body2"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,d.zw)(e.$t("editor.proficient")),1)])),_:1})])),_:2},1032,["color","onClick"]),(0,a.Wm)(r,{push:"",color:t.expertise?"positive":"dark",icon:"keyboard_double_arrow_up",onClick:e=>t.expertise=!t.expertise},{default:(0,a.w5)((()=>[(0,a.Wm)(i,{class:"text-body2"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,d.zw)(e.$t("editor.expertise")),1)])),_:1})])),_:2},1032,["color","onClick"]),(0,a.Wm)(r,{push:"",color:t.override?"warning":"dark",icon:"handyman",onClick:e=>t.override=!t.override},{default:(0,a.w5)((()=>[(0,a.Wm)(i,{class:"text-body2"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,d.zw)(e.$t("editor.override")),1)])),_:1})])),_:2},1032,["color","onClick"])])),_:2},1024),(0,a.Wm)(r,{round:"",color:"negative",icon:"delete",class:"q-mx-sm",onClick:()=>e.deleteSkill(t.key)},{default:(0,a.w5)((()=>[(0,a.Wm)(i,{class:"text-body2"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,d.zw)(e.$t("editor.delete")),1)])),_:1})])),_:2},1032,["onClick"])])),_:2},1032,["label","model-value","disable","onUpdate:modelValue"])))),128))])),_:1}),(0,a.Wm)(w,{align:"center"},{default:(0,a.w5)((()=>[(0,a.Wm)(f,{color:"positive",class:"full-width","auto-close":"",label:e.$t("editor.addSkill")},{default:(0,a.w5)((()=>[(0,a.Wm)(g,null,{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.availableSkills,(t=>(0,a.wy)(((0,a.wg)(),(0,a.j4)(b,{key:t.value,clickable:"",onClick:()=>e.addSkill(t.value)},{default:(0,a.w5)((()=>[(0,a.Wm)(k,null,{default:(0,a.w5)((()=>[(0,a.Wm)(p,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,d.zw)(t.label),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])),[[_]]))),128))])),_:1})])),_:1},8,["label"])])),_:1})])),_:1})])),_:1},8,["label","caption"])}q()(Zt,"components",{QExpansionItem:U.Z,QCard:D.Z,QCardSection:Vt.Z,QSelect:x.Z,QInput:A.Z,QCardActions:Ut.Z,QBtn:_.Z});var Qt=l(759);const Tt=(0,a.aZ)({name:"SkillsEditor",setup(){const e=(0,i.B)(),t=(0,a.Fl)((()=>Object.keys(Qt.H).map((e=>({value:e,label:Qt.H[e].label}))).filter((t=>null==e.skills.find((e=>e.key===t.value))))));return{monster:e,skills:e.skills,addSkill:e.addSkill,deleteSkill:e.deleteSkill,availableSkills:t,bonusForSkill:wt.KE}}});var St=l(2045),zt=l(3246),Ft=l(490),Ht=l(1233),Ot=l(3115),Lt=l(2146);const Mt=(0,y.Z)(Tt,[["render",xt]]),Et=Mt;function It(e,t,l,o,n,s){const i=(0,a.up)("q-input"),r=(0,a.up)("q-tooltip"),c=(0,a.up)("q-btn"),m=(0,a.up)("q-card"),u=(0,a.up)("q-expansion-item");return(0,a.wg)(),(0,a.j4)(u,{"expand-separator":"",icon:"settings_input_antenna",label:e.$t("editor.senses.label"),caption:e.$t("editor.senses.caption")},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{class:"row"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.monster.senses,((t,l)=>((0,a.wg)(),(0,a.j4)(i,{key:l,"model-value":e.monster.senses[l],type:"number",label:e.$t(`monster.sense.${l}`),suffix:"ft",min:"0",step:"5",class:"col q-pa-sm","onUpdate:modelValue":t=>e.monster.senses[l]=e.validateNumber(t,0)},null,8,["model-value","label","onUpdate:modelValue"])))),128)),(0,a.Wm)(i,{type:"number","model-value":e.monster.computedPassivePerception,class:"col-3 q-pa-sm",label:e.$t("monster.passivePerception"),disable:!e.passivePerception?.override??!0,"onUpdate:modelValue":t[1]||(t[1]=t=>e.passivePerception.overrideValue=parseInt(`${t}`))},{after:(0,a.w5)((()=>[(0,a.Wm)(c,{push:"",color:e.passivePerception.override?"warning":"dark",icon:"handyman",onClick:t[0]||(t[0]=t=>e.passivePerception.override=!e.passivePerception.override)},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{class:"text-body2"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,d.zw)(e.$t("editor.override")),1)])),_:1})])),_:1},8,["color"])])),_:1},8,["model-value","label","disable"])])),_:1})])),_:1},8,["label","caption"])}q()(Tt,"components",{QExpansionItem:U.Z,QCard:D.Z,QCardSection:Vt.Z,QInput:A.Z,QBtnGroup:yt.Z,QBtn:_.Z,QTooltip:W.Z,QCardActions:Ut.Z,QBtnDropdown:St.Z,QList:zt.Z,QItem:Ft.Z,QItemSection:Ht.Z,QItemLabel:Ot.Z}),q()(Tt,"directives",{ClosePopup:Lt.Z});const Pt=(0,a.aZ)({name:"SavesEditor",setup(){const e=(0,i.B)();return{monster:e,passivePerception:e.passivePerception,senses:Object.entries(e.senses).map((([e,t])=>({sense:e,range:t}))),validateNumber:Z.m}}}),Bt=(0,y.Z)(Pt,[["render",It]]),Nt=Bt;function Rt(e,t,l,o,n,s){const i=(0,a.up)("q-select"),r=(0,a.up)("q-card-section"),d=(0,a.up)("q-card"),c=(0,a.up)("q-expansion-item");return(0,a.wg)(),(0,a.j4)(c,{"expand-separator":"",icon:"shield",label:e.$t("editor.resistances.label"),caption:e.$t("editor.resistances.caption")},{default:(0,a.w5)((()=>[(0,a.Wm)(d,null,{default:(0,a.w5)((()=>[(0,a.Wm)(r,{class:"row"},{default:(0,a.w5)((()=>[(0,a.Wm)(i,{modelValue:e.monster.resistances,"onUpdate:modelValue":t[0]||(t[0]=t=>e.monster.resistances=t),options:e.resistanceOptions,"use-chips":"",multiple:"",clearable:"","new-value-mode":"add-unique",class:"col-12 q-pa-sm","use-input":"","input-debounce":"0",label:e.$t("monster.resistances"),onFilter:e.resistanceFilter,onClear:t[1]||(t[1]=t=>e.monster.resistances=[])},null,8,["modelValue","options","label","onFilter"]),(0,a.Wm)(i,{modelValue:e.monster.immunities,"onUpdate:modelValue":t[2]||(t[2]=t=>e.monster.immunities=t),options:e.immunityOptions,"use-chips":"",multiple:"",clearable:"","new-value-mode":"add-unique",class:"col-12 q-pa-sm","use-input":"","input-debounce":"0",label:e.$t("monster.immunities"),onFilter:e.immunityFilter,onClear:t[3]||(t[3]=t=>e.monster.immunities=[])},null,8,["modelValue","options","label","onFilter"]),(0,a.Wm)(i,{modelValue:e.monster.vulnerabilities,"onUpdate:modelValue":t[4]||(t[4]=t=>e.monster.vulnerabilities=t),options:e.vulnerabilityOptions,"use-chips":"",multiple:"",clearable:"","new-value-mode":"add-unique",class:"col-12 q-pa-sm","use-input":"","input-debounce":"0",label:e.$t("monster.vulnerabilities"),onFilter:e.vulnerabilityFilter,onClear:t[5]||(t[5]=t=>e.monster.vulnerabilities=[])},null,8,["modelValue","options","label","onFilter"]),(0,a.Wm)(i,{modelValue:e.monster.conditions,"onUpdate:modelValue":t[6]||(t[6]=t=>e.monster.conditions=t),options:e.conditionOptions,"use-chips":"",multiple:"",clearable:"","new-value-mode":"add-unique",class:"col-12 q-pa-sm","use-input":"","input-debounce":"0",label:e.$t("monster.conditionImmunities"),onFilter:e.conditionFilter,onClear:t[7]||(t[7]=t=>e.monster.conditions=[])},null,8,["modelValue","options","label","onFilter"])])),_:1})])),_:1})])),_:1},8,["label","caption"])}q()(Pt,"components",{QExpansionItem:U.Z,QCard:D.Z,QInput:A.Z,QBtn:_.Z,QTooltip:W.Z});var jt=l(8177);function Kt(){const{t:e}=(0,ht.QT)(),t=(0,a.Fl)((()=>Object.keys(jt.Z.condition).map((t=>e(`condition.${t}`)))));return{conditionDefaults:t}}function Yt(){const{t:e}=(0,ht.QT)(),t=(0,a.Fl)((()=>Object.keys(jt.Z.damageType).map((t=>e(`damageType.${t}`)))));return{damageTypeDefaults:t}}function Gt(){const{t:e}=(0,ht.QT)(),t=(0,a.Fl)((()=>Object.keys(jt.Z.attackType).map((t=>e(`attackType.${t}`)))));return{attackTypeDefaults:t}}const Xt=(0,a.aZ)({name:"ResistancesEditor",setup(){const e=(0,i.B)(),{damageTypeDefaults:t}=Yt(),l=(0,r.iH)([]),a=(0,f.B0)(t,l),o=(0,r.iH)([]),n=(0,f.B0)(t,o),s=(0,r.iH)([]),d=(0,f.B0)(t,s),{conditionDefaults:c}=Kt(),m=(0,r.iH)([]),u=(0,f.B0)(c,m);return{monster:e,resistanceOptions:l,resistanceFilter:a,immunityOptions:o,immunityFilter:n,vulnerabilityOptions:s,vulnerabilityFilter:d,conditionOptions:m,conditionFilter:u}}}),Jt=(0,y.Z)(Xt,[["render",Rt]]),el=Jt;function tl(e,t,l,o,n,s){const i=(0,a.up)("q-input"),r=(0,a.up)("q-tooltip"),c=(0,a.up)("q-btn"),m=(0,a.up)("q-select"),u=(0,a.up)("monster-text-editor"),p=(0,a.up)("cr-annotation-card"),k=(0,a.up)("q-card-section"),b=(0,a.up)("q-card-actions"),g=(0,a.up)("q-card"),f=(0,a.up)("q-expansion-item"),w=(0,a.up)("q-list");return(0,a.wg)(),(0,a.j4)(f,{"expand-separator":"",icon:"fa-solid fa-dna",label:e.$t("editor.traits.label"),caption:e.$t("editor.traits.caption")},{default:(0,a.w5)((()=>[(0,a.Wm)(g,null,{default:(0,a.w5)((()=>[(0,a.Wm)(k,{class:"row"},{default:(0,a.w5)((()=>[(0,a.Wm)(w,{bordered:"",separator:"",class:"rounded-borders bg-teal-10 full-width"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.traits,((t,l)=>((0,a.wg)(),(0,a.j4)(f,{key:t.id,label:t.name,"expand-separator":""},{default:(0,a.w5)((()=>[(0,a.Wm)(g,null,{default:(0,a.w5)((()=>[(0,a.Wm)(k,{class:"row"},{default:(0,a.w5)((()=>[(0,a.Wm)(i,{modelValue:t.name,"onUpdate:modelValue":e=>t.name=e,label:e.$t("monster.trait.name"),class:"col-7 q-pa-sm"},null,8,["modelValue","onUpdate:modelValue","label"]),(0,a.Wm)(i,{"model-value":t.limitedUse.count,type:"number",min:"0",class:"col-2 q-pa-sm",label:e.$t("monster.trait.limitedUse.count"),"onUpdate:modelValue":l=>t.limitedUse.count=e.validateNumber(l,0)},null,8,["model-value","label","onUpdate:modelValue"]),(0,a.Wm)(m,{modelValue:t.limitedUse.rate,"onUpdate:modelValue":e=>t.limitedUse.rate=e,"display-value":e.$t(`recharge.${t.limitedUse.rate}`),options:e.rechargeTimeOptions,"emit-value":"",label:e.$t("monster.trait.limitedUse.rate"),class:"col-3 q-pa-sm"},{after:(0,a.w5)((()=>[(0,a.Wm)(c,{round:"",icon:"save",color:"primary",onClick:l=>e.addTemplate(t)},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{class:"text-body2"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,d.zw)(e.$t("monster.trait.save")),1)])),_:1})])),_:2},1032,["onClick"])])),_:2},1032,["modelValue","onUpdate:modelValue","display-value","options","label"]),(0,a.Wm)(u,{field:t.description,"i18n-label-key":"monster.trait.description","token-category":"trait","onUpdate:modelValue":l=>{t.description=l,e.autoUpdateCr(t.description,t.crAnnotation)}},null,8,["field","onUpdate:modelValue"]),(0,a.Wm)(p,{field:"traits",index:l},null,8,["index"])])),_:2},1024),(0,a.Wm)(b,{align:"center"},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{color:"negative",class:"full-width",label:e.$t("editor.deleteTrait"),onClick:()=>e.monster.deleteTrait(t.id)},null,8,["label","onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1032,["label"])))),128))])),_:1})])),_:1}),(0,a.Wm)(b,{align:"center"},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{color:"positive",class:"full-width",label:e.$t("editor.addTrait"),onClick:e.monster.addTrait},null,8,["label","onClick"])])),_:1})])),_:1})])),_:1},8,["label","caption"])}function ll(){const{t:e}=(0,ht.QT)(),t=(0,a.Fl)((()=>Object.keys(jt.Z.recharge).map((t=>({label:e(`recharge.${t}`),value:t})))));return{rechargeTimeOptions:t,rechargeTimeKeys:Object.keys(jt.Z.recharge)}}q()(Xt,"components",{QExpansionItem:U.Z,QCard:D.Z,QCardSection:Vt.Z,QSelect:x.Z});const al={class:"text-subtitle2",style:{display:"flex","align-items":"center",height:"100%"}};function ol(e,t,l,o,n,s){const i=(0,a.up)("q-item-section"),r=(0,a.up)("q-item"),c=(0,a.up)("q-list"),m=(0,a.up)("q-btn-dropdown"),u=(0,a.up)("q-editor");return(0,a.wg)(),(0,a.j4)(u,{ref:"editorRef","model-value":e.$props.field,toolbar:e.toolbarOptions,definitions:e.toolbarDefinitions,class:"full-width q-ma-sm","onUpdate:modelValue":t[0]||(t[0]=t=>e.throttledUpdate(t))},{title:(0,a.w5)((()=>[(0,a._)("div",al,(0,d.zw)(e.$t(e.$props.i18nLabelKey)),1)])),saves:(0,a.w5)((()=>[(0,a.Wm)(m,{ref:"saveTokenRef",dense:"","no-caps":"","no-wrap":"",unelevated:"",label:e.$t("editor.statSave"),size:"sm"},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{dense:""},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.saveTokens,(t=>((0,a.wg)(),(0,a.j4)(r,{key:t.token,clickable:"",onClick:l=>e.add(t.token)},{default:(0,a.w5)((()=>[(0,a.Wm)(i,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,d.zw)(t.label),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1},8,["label"])])),attacks:(0,a.w5)((()=>[(0,a.Wm)(m,{ref:"attackTokenRef",dense:"","no-caps":"","no-wrap":"",unelevated:"",label:e.$t("editor.attackMod"),size:"sm"},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{dense:""},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.attackTokens,(t=>((0,a.wg)(),(0,a.j4)(r,{key:t.token,clickable:"",onClick:l=>e.add(t.token)},{default:(0,a.w5)((()=>[(0,a.Wm)(i,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,d.zw)(t.label),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1},8,["label"])])),"monster-tokens":(0,a.w5)((()=>[(0,a.Wm)(m,{ref:"monsterTokenRef",dense:"","no-caps":"","no-wrap":"",unelevated:"",label:e.$t("editor.monsterToken"),size:"sm"},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{dense:""},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.monsterTokens,(t=>((0,a.wg)(),(0,a.j4)(r,{key:t.token,clickable:"",onClick:l=>e.add(t.token)},{default:(0,a.w5)((()=>[(0,a.Wm)(i,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,d.zw)(t.label),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1},8,["label"])])),"context-tokens":(0,a.w5)((()=>[null!=e.contextTokens?((0,a.wg)(),(0,a.j4)(m,{key:0,ref:"contextTokenRef",dense:"","no-caps":"","no-wrap":"",unelevated:"",label:e.$t(e.contextTokenLabel),size:"sm"},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{dense:""},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.contextTokens,(t=>((0,a.wg)(),(0,a.j4)(r,{key:t.token,clickable:"",onClick:l=>e.add(t.token)},{default:(0,a.w5)((()=>[(0,a.Wm)(i,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,d.zw)(t.label),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1},8,["label"])):(0,a.kq)("",!0)])),_:1},8,["model-value","toolbar","definitions"])}function nl(){const{t:e}=(0,ht.QT)(),t=(0,a.Fl)((()=>[{label:e("monster.stat.STR"),token:"{DC:STR}"},{label:e("monster.stat.DEX"),token:"{DC:DEX}"},{label:e("monster.stat.CON"),token:"{DC:CON}"},{label:e("monster.stat.INT"),token:"{DC:INT}"},{label:e("monster.stat.WIS"),token:"{DC:WIS}"},{label:e("monster.stat.CHA"),token:"{DC:CHA}"}])),l=(0,a.Fl)((()=>[{label:e("monster.stat.STR"),token:"{A:STR}"},{label:e("monster.stat.DEX"),token:"{A:DEX}"},{label:e("monster.stat.CON"),token:"{A:CON}"},{label:e("monster.stat.INT"),token:"{A:INT}"},{label:e("monster.stat.WIS"),token:"{A:WIS}"},{label:e("monster.stat.CHA"),token:"{A:CHA}"}])),o=(0,a.Fl)((()=>[{label:e("monster.proficiencyBonus"),token:"{monster.proficiency}"},{label:e("monster.ac"),token:"{monster.AC}"},{label:e("monster.hp.label"),token:"{monster.hp}"}])),n=(0,a.Fl)((()=>[{label:e("monster.trait.name"),token:"{trait.name}"},{label:e("monster.trait.limitedUse.label"),token:"{trait.limitedUse}"},{label:e("monster.trait.limitedUse.count"),token:"{trait.limitedUse.count}"},{label:e("monster.trait.limitedUse.rate"),token:"{trait.limitedUse.rate}"}])),s=(0,a.Fl)((()=>[{label:e("monster.spellcasting.level"),token:"{spellcasting.level}"},{label:e("editor.spellcasting.slot.levelOrdinal"),token:"{spellcasting.ordinal}"},{label:e("monster.spellcasting.class"),token:"{spellcasting.class}"},{label:e("monster.spellcasting.ability"),token:"{spellcasting.stat}"},{label:e("monster.spellcasting.save"),token:"{spellcasting.save}"},{label:e("monster.spellcasting.attack"),token:"{spellcasting.attack}"},{label:e("monster.spellcasting.modifier"),token:"{spellcasting.modifier}"}])),i=(0,a.Fl)((()=>[{label:e("editor.attack.primary"),token:"{attack.damage}"},{label:e("editor.attack.distanceLabel"),token:"{attack.distance}"},{label:e("monster.attack.bonus"),token:"{attack.modifier}"},{label:e("monster.attack.targets"),token:"{attack.targets}"},{label:e("editor.attack.additional"),token:"{attack.additionalDamage}"},{label:e("editor.attack.conditional"),token:"{attack.conditionalDamage}"}])),r=(0,a.Fl)((()=>[{label:e("monster.trait.name"),token:"{action.name}"},{label:e("monster.trait.limitedUse.label"),token:"{action.limitedUse}"},{label:e("monster.trait.limitedUse.count"),token:"{action.limitedUse.count}"},{label:e("monster.trait.limitedUse.rate"),token:"{action.limitedUse.rate}"},{label:e("monster.action.recharge"),token:"{action.recharge}"}])),d=(0,a.Fl)((()=>[{label:e("editor.legendary.actionCount"),token:"{legendaryActions.count"},{label:e("editor.legendary.count"),token:"{legendaryActions.actions}"}]));return{attackTokens:l,saveTokens:t,monsterTokens:o,traitTokens:n,spellTokens:s,attackDamageTokens:i,actionTokens:r,legendaryTokens:d}}var sl=l(4409),il=l.n(sl);const rl=(0,a.aZ)({name:"MonsterTextEditor",props:{field:{required:!0,type:String},tokenCategory:{type:String,default:"none"},i18nLabelKey:{required:!0,type:String},showReset:{type:Boolean,default:!1}},emits:["update:modelValue","reset"],setup(e,t){const{t:l}=(0,ht.QT)(),o=(0,r.iH)(null),n=(0,r.iH)(null),s=(0,r.iH)(null),i=(0,r.iH)(null),d=(0,r.iH)(null),c=nl(),m=(0,r.iH)([["title"],["bold","italic","underline"],["undo","redo"],["saves","attacks","monster-tokens","context-tokens"]]);e.showReset&&m.value.push(["reset"]);const u=(0,r.iH)({reset:{tip:l("editor.resetTip"),icon:"restart_alt",handler:()=>t.emit("reset")}}),p=il().throttle((e=>{t.emit("update:modelValue",e)}),500),k=e=>{const t=o.value;n.value?.hide(),i.value?.hide(),s.value?.hide(),d.value?.hide(),t.caret.restore(),t.runCmd("insertHTML",`${e}`),t.focus()},b=(0,a.Fl)((()=>"trait"===e.tokenCategory?c.traitTokens.value:"spell"===e.tokenCategory?c.spellTokens.value:"attack"===e.tokenCategory?c.attackDamageTokens.value:"action"===e.tokenCategory?c.actionTokens.value:"legendary"===e.tokenCategory?c.legendaryTokens.value:null)),g=(0,a.Fl)((()=>"trait"===e.tokenCategory?"editor.trait":"spell"===e.tokenCategory?"editor.spellcasting.label":"attack"===e.tokenCategory?"editor.attack.customRenderer":"action"===e.tokenCategory?"editor.action.tokenLabel":"legendary"===e.tokenCategory?"editor.legendary.label":""));return{monsterTokenRef:n,attackTokenRef:s,saveTokenRef:i,contextTokenRef:d,editorRef:o,add:k,...c,contextTokens:b,contextTokenLabel:g,throttledUpdate:p,toolbarOptions:m,toolbarDefinitions:u}}});var dl=l(7699);const cl=(0,y.Z)(rl,[["render",ol]]),ml=cl;function ul(){const e=(0,i.B)(),{t}=(0,ht.QT)(),l=function(t,l){if(!l.automatic)return;const a=RegExp(/\{(\d+)d(\d+)[ ]*([+-][ ]*\d+)?\}/gi),o=[...t.matchAll(a)];let n=0;for(const e of o){const t=parseInt(e[1]),l=parseInt(e[2]),a=null!=e[3]?parseInt(e[3]):0,o=(0,wt.qT)(t,l)+a;o>n&&(n=o)}l.maxDamage=n,l.multitarget=!1;const s=RegExp(/\{DC:(\w{3})\}/gi),i=[...t.matchAll(s)];let r=0;for(const u of i){const t=e.defaultSpellSave(u[1]);t>r&&(r=t)}l.maxSave=r;const d=RegExp(/\{A:(\w{3})\}/gi),c=[...t.matchAll(d)];let m=0;for(const u of c){const t=e.defaultSpellAttackModifier(u[1]);t>m&&(m=t)}l.maxModifier=m,l.ehpModifier=0,l.ehpMultiplier=1,l.acModifier=0};function a(e){const l=`${e.maxDamage} ${t("editor.crAnnotation.damage")}${e.multitarget?` (${t("editor.crAnnotation.multitarget")})`:""}`,a=`, DC ${e.maxSave}/${(0,wt.Ed)(e.maxModifier)}`,o=0!==e.ehpModifier||1!==e.ehpMultiplier?`, ${t("editor.crAnnotation.ehp")} ${(0,wt.Ed)(e.ehpModifier)}/x${e.ehpMultiplier}`:"",n=0!==e.acModifier?`, ${t("monster.ac")} ${(0,wt.Ed)(e.acModifier)}`:"";return`${[l,a,o,n].join("")}`}return{autoUpdateCr:l,printCrSummary:a}}q()(rl,"components",{QEditor:dl.Z,QBtnDropdown:St.Z,QList:zt.Z,QItem:Ft.Z,QItemSection:Ht.Z});const pl={class:"full-width"},kl={class:"col"},bl={class:"text-overline text-uppercase"},gl={class:"text-subtitle"},fl={class:"col-2",style:{display:"flex","justify-content":"flex-end","justify-items":"flex-end","align-items":"center","align-content":"flex-end"}},wl={class:"row"};function vl(e,t,l,o,n,s){const i=(0,a.up)("lock-toggle-button"),r=(0,a.up)("q-tooltip"),c=(0,a.up)("q-btn"),m=(0,a.up)("q-btn-group"),u=(0,a.up)("q-card-section"),p=(0,a.up)("q-separator"),k=(0,a.up)("q-input"),b=(0,a.up)("q-slide-transition"),g=(0,a.up)("q-card");return(0,a.wg)(),(0,a.iD)("div",pl,[(0,a.Wm)(g,{flat:"",bordered:""},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{class:"bg-indigo-10 row"},{default:(0,a.w5)((()=>[(0,a._)("div",kl,[(0,a._)("div",bl,(0,d.zw)(e.$t("editor.crAnnotation.title")),1),(0,a._)("div",gl,(0,d.zw)(e.printCrSummary(e.crData.crAnnotation)),1)]),(0,a._)("div",fl,[(0,a.Wm)(m,{push:""},{default:(0,a.w5)((()=>[(0,a.Wm)(i,{locked:e.crData.crAnnotation.automatic,"lock-tooltip":e.$t("editor.crAnnotation.automatic"),"unlock-tooltip":e.$t("editor.crAnnotation.manual"),onClick:t[0]||(t[0]=()=>{e.crData.crAnnotation.automatic=!e.crData.crAnnotation.automatic,e.crData.crAnnotation.automatic&&e.autoUpdateCr(e.crData.description,e.crData.crAnnotation)})},null,8,["locked","lock-tooltip","unlock-tooltip"]),(0,a.Wm)(c,{push:"",icon:e.crData.crAnnotation.include?"code":"code_off",color:e.crData.crAnnotation.include?"positive":"dark",size:"md",onClick:t[1]||(t[1]=t=>e.crData.crAnnotation.include=!e.crData.crAnnotation.include)},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{class:"text-body2"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,d.zw)(e.crData.crAnnotation.include?e.$t("editor.crAnnotation.include"):e.$t("editor.crAnnotation.exclude")),1)])),_:1})])),_:1},8,["icon","color"])])),_:1})])])),_:1}),(0,a.Wm)(b,null,{default:(0,a.w5)((()=>[(0,a.wy)((0,a._)("div",null,[(0,a.Wm)(p),(0,a.Wm)(u,null,{default:(0,a.w5)((()=>[(0,a._)("div",wl,[(0,a.Wm)(k,{"model-value":e.crData.crAnnotation.maxDamage,type:"number",disable:e.crData.crAnnotation.automatic,label:e.$t("editor.crAnnotation.maxDamage"),min:"0",class:"col-12 col-sm-6 col-md-3 col-lg-2 q-pa-sm","onUpdate:modelValue":t[3]||(t[3]=t=>e.crData.crAnnotation.maxDamage=e.validateNumber(t,0))},{after:(0,a.w5)((()=>[(0,a.Wm)(c,{push:"",icon:e.crData.crAnnotation.multitarget?"groups":"person",color:"primary",onClick:t[2]||(t[2]=t=>e.crData.crAnnotation.multitarget=!e.crData.crAnnotation.multitarget)},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{class:"text-body2"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,d.zw)(e.crData.crAnnotation.multitarget?e.$t("editor.crAnnotation.multitarget"):e.$t("editor.crAnnotation.singletarget")),1)])),_:1})])),_:1},8,["icon"])])),_:1},8,["model-value","disable","label"]),(0,a.Wm)(k,{"model-value":e.crData.crAnnotation.maxSave,type:"number",label:e.$t("editor.crAnnotation.maxSave"),disable:e.crData.crAnnotation.automatic,min:"0",class:"col-12 col-sm-6 col-md-3 col-lg-2 q-pa-sm","onUpdate:modelValue":t[4]||(t[4]=t=>e.crData.crAnnotation.maxSave=e.validateNumber(t,0))},null,8,["model-value","label","disable"]),(0,a.Wm)(k,{"model-value":e.crData.crAnnotation.maxModifier,type:"number",label:e.$t("editor.crAnnotation.maxModifier"),disable:e.crData.crAnnotation.automatic,min:"0",class:"col-12 col-sm-6 col-md-3 col-lg-2 q-pa-sm","onUpdate:modelValue":t[5]||(t[5]=t=>e.crData.crAnnotation.maxModifier=e.validateNumber(t,0))},null,8,["model-value","label","disable"]),(0,a.Wm)(k,{"model-value":e.crData.crAnnotation.ehpModifier,type:"number",label:e.$t("editor.crAnnotation.ehpModifier"),disable:e.crData.crAnnotation.automatic,min:"0",class:"col-12 col-sm-6 col-md-3 col-lg-2 q-pa-sm","onUpdate:modelValue":t[6]||(t[6]=t=>e.crData.crAnnotation.ehpModifier=e.validateNumber(t,0))},null,8,["model-value","label","disable"]),(0,a.Wm)(k,{"model-value":e.crData.crAnnotation.ehpMultiplier,type:"number",label:e.$t("editor.crAnnotation.ehpMultiplier"),disable:e.crData.crAnnotation.automatic,min:"0",class:"col-12 col-sm-6 col-md-3 col-lg-2 q-pa-sm","onUpdate:modelValue":t[7]||(t[7]=t=>e.crData.crAnnotation.ehpMultiplier=e.validateNumber(t,1))},null,8,["model-value","label","disable"]),(0,a.Wm)(k,{"model-value":e.crData.crAnnotation.acModifier,type:"number",label:e.$t("editor.crAnnotation.acModifier"),disable:e.crData.crAnnotation.automatic,min:"0",class:"col-12 col-sm-6 col-md-3 col-lg-2 q-pa-sm","onUpdate:modelValue":t[8]||(t[8]=t=>e.crData.crAnnotation.acModifier=e.validateNumber(t,0))},null,8,["model-value","label","disable"])])])),_:1})],512),[[S.F8,!e.crData.crAnnotation.automatic]])])),_:1})])),_:1})])}const yl=(0,a.aZ)({name:"CrAnnotationCard",components:{LockToggleButton:h},props:{field:{required:!0,type:String},index:{required:!0,type:Number}},setup(e){const t=(0,i.B)(),l=t[e.field][e.index];return{crData:l,validateNumber:Z.m,...ul()}}});var _l=l(9003),Wl=l(926);const Cl=(0,y.Z)(yl,[["render",vl]]),ql=Cl;q()(yl,"components",{QCard:D.Z,QCardSection:Vt.Z,QBtnGroup:yt.Z,QBtn:_.Z,QTooltip:W.Z,QSlideTransition:_l.Z,QSeparator:Wl.Z,QInput:A.Z});var $l=l(9302),hl=l(3882);const Zl={class:"text-h6"},Vl={class:"col-12 q-pa-sm text-subtitle1"},Ul={href:"https://quasar.dev/vue-components/icon#webfont-usage",target:"_blank"},Dl={href:"https://fonts.google.com/icons?selected=Material+Icons&icon.style=Filled",target:"_blank"},Al={href:"https://materialdesignicons.com/",target:"_blank"},xl={href:"https://fontawesome.com/search?m=free",target:"_blank"},Ql={class:"col-12 q-pa-sm"};function Tl(e,t,l,o,n,s){const i=(0,a.up)("q-card-section"),r=(0,a.up)("q-separator"),c=(0,a.up)("q-input"),m=(0,a.up)("i18n-t"),u=(0,a.up)("q-toggle"),p=(0,a.up)("q-btn"),k=(0,a.up)("q-card-actions"),b=(0,a.up)("q-card"),g=(0,a.up)("q-dialog");return(0,a.wg)(),(0,a.j4)(g,{ref:"dialogRef",onHide:e.onDialogHide},{default:(0,a.w5)((()=>[(0,a.Wm)(b,{class:"q-dialog-plugin new-spell-dialog"},{default:(0,a.w5)((()=>[(0,a.Wm)(i,null,{default:(0,a.w5)((()=>[(0,a._)("div",Zl,(0,d.zw)(e.$t("editor.template.create",[e.targetName])),1)])),_:1}),(0,a.Wm)(r),(0,a.Wm)(i,{class:"row"},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{ref:"nameInput",modelValue:e.name,"onUpdate:modelValue":t[0]||(t[0]=t=>e.name=t),label:e.$t("editor.template.name"),class:"col-12 q-pa-sm","reactive-rules":"",rules:e.rules,"bottom-slots":""},{hint:(0,a.w5)((()=>[(0,a.Uk)((0,d.zw)(e.$t("editor.template.nameHint")),1)])),_:1},8,["modelValue","label","rules"]),(0,a.Wm)(c,{modelValue:e.icon,"onUpdate:modelValue":t[1]||(t[1]=t=>e.icon=t),class:"col-12 q-pa-sm",label:e.$t("editor.template.icon")},null,8,["modelValue","label"]),(0,a._)("div",Vl,[(0,a.Wm)(m,{keypath:"editor.template.availableIcons"},{default:(0,a.w5)((()=>[(0,a._)("a",Ul,(0,d.zw)(e.$t("editor.template.link0")),1),(0,a._)("a",Dl,(0,d.zw)(e.$t("editor.template.link1")),1),(0,a._)("a",Al,(0,d.zw)(e.$t("editor.template.link2")),1),(0,a._)("a",xl,(0,d.zw)(e.$t("editor.template.link3")),1)])),_:1})]),(0,a._)("div",Ql,[(0,a.Wm)(u,{modelValue:e.override,"onUpdate:modelValue":t[2]||(t[2]=t=>e.override=t),label:e.$t("editor.template.override")},null,8,["modelValue","label"])])])),_:1}),(0,a.Wm)(k,{align:"right"},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{color:"green",label:e.$t("editor.save"),disabled:!e.override&&(!e.nameInput?.validate()||0===e.name.length),onClick:e.onOKClick},null,8,["label","disabled","onClick"]),(0,a.Wm)(p,{color:"primary",label:e.$t("editor.cancel"),onClick:e.onCancelClick},null,8,["label","onClick"])])),_:1})])),_:1})])),_:1},8,["onHide"])}var Sl=l(4182);const zl=(0,a.aZ)({name:"NewTemplateDialog",props:{targetName:{type:String,default:""}},emits:[...Sl.Z.emits],setup(e){const{dialogRef:t,onDialogHide:l,onDialogOK:o,onDialogCancel:n}=(0,Sl.Z)(),s=(0,hl.Z)(),{t:i}=(0,ht.QT)(),d=(0,r.iH)(""),c=(0,r.iH)(e.targetName),m=(0,r.iH)(!1),u=(0,r.iH)(null),p=(0,a.Fl)((()=>m.value?(u.value?.resetValidation(),[]):[e=>!(e in s.allTemplates)||i("editor.template.nameValidator")]));return{dialogRef:t,onDialogHide:l,onOKClick(){o({name:c.value,icon:d.value})},onCancelClick:n,icon:d,name:c,nameInput:u,override:m,templateStore:s,rules:p}}});var Fl=l(2074),Hl=l(3175);const Ol=(0,y.Z)(zl,[["render",Tl]]),Ll=Ol;q()(zl,"components",{QDialog:Fl.Z,QCard:D.Z,QCardSection:Vt.Z,QSeparator:Wl.Z,QInput:A.Z,QToggle:Hl.Z,QCardActions:Ut.Z,QBtn:_.Z});const Ml=(0,a.aZ)({name:"TraitsEditor",components:{MonsterTextEditor:ml,CrAnnotationCard:ql},setup(){const e=(0,i.B)(),{rechargeTimeOptions:t}=ll(),{autoUpdateCr:l,printCrSummary:o}=ul(),n=(0,$l.Z)(),{t:s}=(0,ht.QT)(),r=(0,hl.Z)(),d=e=>{n.dialog({component:Ll,componentProps:{targetName:e.name}}).onOk((({name:t,icon:l})=>{r.addCustomTrait(e,t,l),n.notify({message:s("editor.template.added",[t]),type:"positive"})}))};return{monster:e,traits:(0,a.Fl)((()=>e.traits)),rechargeTimeOptions:t,autoUpdateCr:l,printCrSummary:o,addTemplate:d,validateNumber:Z.m}}}),El=(0,y.Z)(Ml,[["render",tl]]),Il=El;q()(Ml,"components",{QExpansionItem:U.Z,QCard:D.Z,QCardSection:Vt.Z,QList:zt.Z,QInput:A.Z,QSelect:x.Z,QBtn:_.Z,QTooltip:W.Z,QCardActions:Ut.Z});const Pl={class:"row"},Bl={class:"q-pa-sm full-width"};function Nl(e,t,l,o,n,s){const i=(0,a.up)("q-select"),r=(0,a.up)("lock-toggle-button"),c=(0,a.up)("q-input"),m=(0,a.up)("q-tooltip"),u=(0,a.up)("q-btn"),p=(0,a.up)("class-casting-editor"),k=(0,a.up)("at-will-casting-editor"),b=(0,a.up)("q-list"),g=(0,a.up)("q-card"),f=(0,a.up)("q-expansion-item");return(0,a.wg)(),(0,a.j4)(f,{"expand-separator":"",icon:"fa-solid fa-wand-sparkles",label:e.$t("editor.spellcasting.label"),caption:e.$t("editor.spellcasting.caption")},{default:(0,a.w5)((()=>[(0,a.Wm)(g,null,{default:(0,a.w5)((()=>[(0,a._)("div",Pl,[(0,a.Wm)(i,{modelValue:e.monster.spellcasting.stat,"onUpdate:modelValue":t[0]||(t[0]=t=>e.monster.spellcasting.stat=t),options:e.statOptions,label:e.$t("monster.spellcasting.ability"),class:"col-2 q-pa-sm"},null,8,["modelValue","options","label"]),(0,a.Wm)(c,{"model-value":e.spellSaveValue,label:e.$t("monster.spellcasting.save"),type:"number",disable:!e.monster.spellcasting.save.override,class:"col q-pa-sm","onUpdate:modelValue":t[2]||(t[2]=t=>e.monster.spellcasting.save.overrideValue=parseInt(`${t}`))},{after:(0,a.w5)((()=>[(0,a.Wm)(r,{locked:!e.monster.spellcasting.save.override,"lock-tooltip":e.$t("monster.spellcasting.lockSave"),"unlock-tooltip":e.$t("monster.spellcasting.unlockSave"),onClick:t[1]||(t[1]=t=>e.monster.spellcasting.save.override=!e.monster.spellcasting.save.override)},null,8,["locked","lock-tooltip","unlock-tooltip"])])),_:1},8,["model-value","label","disable"]),(0,a.Wm)(c,{"model-value":e.spellAttackValue,label:e.$t("monster.spellcasting.attack"),type:"number",disable:!e.monster.spellcasting.attack.override,class:"col q-pa-sm","onUpdate:modelValue":t[4]||(t[4]=t=>e.monster.spellcasting.attack.overrideValue=parseInt(`${t}`))},{after:(0,a.w5)((()=>[(0,a.Wm)(r,{locked:!e.monster.spellcasting.attack.override,"lock-tooltip":e.$t("monster.spellcasting.lockAttack"),"unlock-tooltip":e.$t("monster.spellcasting.unlockAttack"),onClick:t[3]||(t[3]=t=>e.monster.spellcasting.attack.override=!e.monster.spellcasting.attack.override)},null,8,["locked","lock-tooltip","unlock-tooltip"])])),_:1},8,["model-value","label","disable"]),(0,a.Wm)(c,{"model-value":e.spellModifierValue,label:e.$t("monster.spellcasting.modifier"),type:"number",disable:!e.monster.spellcasting.modifier.override,class:"col q-pa-sm","onUpdate:modelValue":t[6]||(t[6]=t=>e.monster.spellcasting.modifier.overrideValue=parseInt(`${t}`))},{after:(0,a.w5)((()=>[(0,a.Wm)(r,{locked:!e.monster.spellcasting.modifier.override,"lock-tooltip":e.$t("monster.spellcasting.lockModifier"),"unlock-tooltip":e.$t("monster.spellcasting.unlockModifier"),onClick:t[5]||(t[5]=t=>e.monster.spellcasting.modifier.override=!e.monster.spellcasting.modifier.override)},null,8,["locked","lock-tooltip","unlock-tooltip"]),(0,a.Wm)(u,{icon:"add",round:"",color:"primary",class:"q-ml-md",onClick:e.addSpell},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{class:"text-body2"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,d.zw)(e.$t("editor.spellcasting.custom.create")),1)])),_:1})])),_:1},8,["onClick"])])),_:1},8,["model-value","label","disable"])]),(0,a._)("div",Bl,[(0,a.Wm)(b,{bordered:"",separator:"",class:"rounded-borders"},{default:(0,a.w5)((()=>[(0,a.Wm)(p),(0,a.Wm)(k)])),_:1})])])),_:1})])),_:1},8,["label","caption"])}var Rl=l(2395);const jl={class:"row"},Kl={class:"col-12 q-mt-md"},Yl={class:"row"},Gl={class:"col-1 flex flex-center"},Xl={key:0,class:"col-1 text-capitalize flex flex-center"};function Jl(e,t,l,o,n,s){const i=(0,a.up)("q-select"),r=(0,a.up)("q-input"),c=(0,a.up)("q-tooltip"),m=(0,a.up)("q-btn"),u=(0,a.up)("monster-text-editor"),p=(0,a.up)("q-slide-transition"),k=(0,a.up)("q-item-label"),b=(0,a.up)("q-item-section"),g=(0,a.up)("q-badge"),f=(0,a.up)("q-item"),w=(0,a.up)("q-card-section"),v=(0,a.up)("q-separator"),y=(0,a.up)("q-card"),_=(0,a.up)("q-expansion-item");return(0,a.wg)(),(0,a.j4)(_,{"expand-separator":"",label:e.$t("editor.spellcasting.class.label"),caption:e.$t("editor.spellcasting.class.caption"),"header-class":"bg-purple-10"},{default:(0,a.w5)((()=>[(0,a.Wm)(y,null,{default:(0,a.w5)((()=>[(0,a.Wm)(w,null,{default:(0,a.w5)((()=>[(0,a._)("div",jl,[(0,a.Wm)(i,{label:e.$t("monster.spellcasting.class"),"model-value":e.monster.spellcasting.class,"display-value":e.classDisplayValue,options:e.SrdCastingClassOptions,"new-value-mode":"add-unique","use-input":"","emit-value":"",class:"col-2 q-pa-sm","onUpdate:modelValue":e.updateSpellcastingClass},null,8,["label","model-value","display-value","options","onUpdate:modelValue"]),(0,a.Wm)(r,{"model-value":e.monster.spellcasting.level,label:e.$t("monster.spellcasting.level"),type:"number",min:"1",max:"20",class:"col-2 q-pa-sm","onUpdate:modelValue":t[0]||(t[0]=t=>{e.monster.spellcasting.level=e.validateNumber(t,1),e.updateSpellcastingSlots(e.monster.spellcasting.level)})},null,8,["model-value","label"]),(0,a.Wm)(r,{modelValue:e.monster.spellcasting.notes,"onUpdate:modelValue":t[2]||(t[2]=t=>e.monster.spellcasting.notes=t),label:e.$t("monster.spellcasting.notes"),class:"col q-pa-sm","bottom-slots":""},{hint:(0,a.w5)((()=>[(0,a.Uk)((0,d.zw)(e.$t("editor.plainTextNote")),1)])),after:(0,a.w5)((()=>[(0,a.Wm)(m,{push:"",icon:e.monster.spellcasting.useCustomClassPreamble?"edit":"edit_off",color:e.monster.spellcasting.useCustomClassPreamble?"warning":"dark",size:"md",onClick:t[1]||(t[1]=t=>e.monster.spellcasting.useCustomClassPreamble=!e.monster.spellcasting.useCustomClassPreamble)},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{class:"text-body2"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,d.zw)(e.monster.spellcasting.useCustomClassPreamble?e.$t("editor.spellcasting.slot.useCustomPreamble"):e.$t("editor.spellcasting.slot.useDefaultPreamble")),1)])),_:1})])),_:1},8,["icon","color"])])),_:1},8,["modelValue","label"]),(0,a.Wm)(p,null,{default:(0,a.w5)((()=>[(0,a.wy)((0,a._)("div",Kl,[(0,a.Wm)(u,{field:e.monster.spellcasting.customClassPreamble,"i18n-label-key":"editor.spellcasting.slot.preamble","token-category":"spell","show-reset":!0,"onUpdate:modelValue":t[3]||(t[3]=t=>e.monster.spellcasting.customClassPreamble=t),onReset:t[4]||(t[4]=t=>e.monster.spellcasting.customClassPreamble=e.$t("presets.classSpellcasting"))},null,8,["field"])],512),[[S.F8,e.monster.spellcasting.useCustomClassPreamble]])])),_:1}),(0,a.Wm)(i,{modelValue:e.monster.spellcasting.standard,"onUpdate:modelValue":t[7]||(t[7]=t=>e.monster.spellcasting.standard=t),label:e.$t("editor.spellcasting.slot.all"),options:e.spellOptions,"use-chips":"",multiple:"","use-input":"",clearable:"","emit-value":"","input-debounce":"0",class:"col-12 q-pa-sm",onFilter:e.spellFilter,onClear:t[8]||(t[8]=t=>e.monster.spellcasting.standard=[])},{after:(0,a.w5)((()=>[(0,a.Wm)(m,{class:"q-mr-sm",color:e.classFilter?"positive":"dark",onClick:t[5]||(t[5]=t=>e.classFilter=!e.classFilter)},{default:(0,a.w5)((()=>[(0,a.Uk)((0,d.zw)(e.classFilter?e.$t("editor.spellcasting.slot.classOnlyOn"):e.$t("editor.spellcasting.slot.classOnlyOff")),1)])),_:1},8,["color"]),(0,a.Wm)(m,{color:"primary",onClick:t[6]||(t[6]=t=>e.showSlots=!e.showSlots)},{default:(0,a.w5)((()=>[(0,a.Uk)((0,d.zw)(e.showSlots?e.$t("editor.spellcasting.slot.hideSlots"):e.$t("editor.spellcasting.slot.showSlots")),1)])),_:1})])),option:(0,a.w5)((t=>[(0,a.Wm)(f,(0,d.vs)((0,a.F4)(t.itemProps)),{default:(0,a.w5)((()=>[(0,a.Wm)(b,null,{default:(0,a.w5)((()=>[(0,a.Wm)(k,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,d.zw)(t.opt.label),1)])),_:2},1024),(0,a.Wm)(k,{caption:""},{default:(0,a.w5)((()=>[(0,a.Uk)((0,d.zw)(t.opt.classDisplay),1)])),_:2},1024)])),_:2},1024),(0,a.Wm)(b,{side:"",top:""},{default:(0,a.w5)((()=>[(0,a.Wm)(g,{color:"purple-8",label:0===t.opt.level?e.$t("editor.spellcasting.slot.cantrip"):e.$t("editor.spellcasting.slot.level",{ordinal:e.spellLevels[t.opt.level]})},null,8,["label"])])),_:2},1024)])),_:2},1040)])),_:1},8,["modelValue","label","options","onFilter"])])])),_:1}),(0,a.Wm)(p,null,{default:(0,a.w5)((()=>[(0,a.wy)((0,a._)("div",null,[(0,a.Wm)(v),(0,a.Wm)(w,null,{default:(0,a.w5)((()=>[(0,a._)("div",Yl,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.spellLevels,((t,l)=>((0,a.wg)(),(0,a.iD)(a.HY,{key:l},[(0,a._)("div",Gl,(0,d.zw)(0===l?e.$t("editor.spellcasting.slot.cantrip"):e.$t("editor.spellcasting.slot.level",{ordinal:t})),1),0===l?((0,a.wg)(),(0,a.iD)("div",Xl,(0,d.zw)(e.$t("recharge.AT_WILL")),1)):((0,a.wg)(),(0,a.j4)(r,{key:1,"model-value":e.monster.spellcasting.slots[l-1],type:"number",class:"col-1 q-pa-sm",min:"0",label:e.$t("editor.spellcasting.slot.slots"),"onUpdate:modelValue":t=>e.monster.spellcasting.slots[l-1]=e.validateNumber(t,0)},null,8,["model-value","label","onUpdate:modelValue"])),(0,a.Wm)(i,{"model-value":e.monster.knownSpellsOfLevel(l),label:0===l?e.$t("editor.spellcasting.slot.cantrips"):e.$t("editor.spellcasting.slot.knownAtLevel",{ordinal:t}),options:e.spellOptionsByLevel(l,e.classFilter?e.monster.spellcasting.class:void 0),"use-chips":"",multiple:"","emit-value":"","input-debounce":"0",class:"col-10 q-pa-sm","onUpdate:modelValue":t=>e.monster.updateSpellsAtLevel(l,t)},{option:(0,a.w5)((e=>[(0,a.Wm)(f,(0,d.vs)((0,a.F4)(e.itemProps)),{default:(0,a.w5)((()=>[(0,a.Wm)(b,null,{default:(0,a.w5)((()=>[(0,a.Wm)(k,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,d.zw)(e.opt.label),1)])),_:2},1024),(0,a.Wm)(k,{caption:""},{default:(0,a.w5)((()=>[(0,a.Uk)((0,d.zw)(e.opt.classDisplay),1)])),_:2},1024)])),_:2},1024)])),_:2},1040)])),_:2},1032,["model-value","label","options","onUpdate:modelValue"])],64)))),128))])])),_:1})],512),[[S.F8,e.showSlots]])])),_:1})])),_:1})])),_:1},8,["label","caption"])}var ea=l(3228),ta=l(6869);const la=(0,a.aZ)({name:"ClassCastingEditor",components:{MonsterTextEditor:ml},setup(){const e=(0,r.iH)(!1),t=(0,r.iH)(!1),l=(0,i.B)(),o=(0,Rl.i)(),{rechargeTimeOptions:n}=ll(),s=(0,ea.F)(),d=(0,a.Fl)((()=>t.value?o.allSpellOptions.filter((e=>e.class.find((e=>e.toLowerCase()===l.spellcasting.class?.toLowerCase())))):o.allSpellOptions)),c=(0,r.iH)([]),m=(0,f.DK)(d,c),{ordinalSpellLevels:u}=(0,ta.G)(),p=u,k=(0,a.Fl)((()=>null==l.spellcasting.class?"":l.spellcasting.class in s.SrdClass.value?s.SrdClass.value[l.spellcasting.class]:l.spellcasting.class)),b=e=>{if(null!=e&&e in s.ClassCastingStat){const t=e,a=s.ClassSpellSlots[t];l.spellcasting.class=t,l.spellcasting.stat=s.ClassCastingStat[t]??l.spellcasting.stat,l.spellcasting.slots=null!=a?a[l.spellcasting.level-1]:[0,0,0,0,0,0,0,0,0]}else l.spellcasting.class=e},g=e=>{if(l.spellcasting.class&&l.spellcasting.class in s.ClassCastingStat){const t=l.spellcasting.class,a=s.ClassSpellSlots[t];l.spellcasting.slots=null!=a?a[e-1]:[0,0,0,0,0,0,0,0,0]}};return{monster:l,rechargeTimeOptions:n,updateSpellcastingClass:b,updateSpellcastingSlots:g,classDisplayValue:k,spellOptions:c,spellFilter:m,showSlots:e,classFilter:t,spellLevels:p,spellOptionsByLevel:o.spellOptionsByLevel,validateNumber:Z.m,...s}}});var aa=l(990);const oa=(0,y.Z)(la,[["render",Jl]]),na=oa;q()(la,"components",{QExpansionItem:U.Z,QCard:D.Z,QCardSection:Vt.Z,QSelect:x.Z,QInput:A.Z,QBtn:_.Z,QTooltip:W.Z,QSlideTransition:_l.Z,QItem:Ft.Z,QItemSection:Ht.Z,QItemLabel:Ot.Z,QBadge:aa.Z,QSeparator:Wl.Z});const sa={class:"row"},ia={class:"col-12 q-mt-md"},ra={class:"col-12 q-py-md q-px-sm"};function da(e,t,l,o,n,s){const i=(0,a.up)("q-tooltip"),r=(0,a.up)("q-btn"),c=(0,a.up)("q-input"),m=(0,a.up)("monster-text-editor"),u=(0,a.up)("q-slide-transition"),p=(0,a.up)("q-select"),k=(0,a.up)("searchable-spell-select"),b=(0,a.up)("q-card-section"),g=(0,a.up)("q-card"),f=(0,a.up)("q-expansion-item");return(0,a.wg)(),(0,a.j4)(f,{"expand-separator":"",label:e.$t("editor.spellcasting.innate.label"),caption:e.$t("editor.spellcasting.innate.caption"),"header-class":"bg-purple-10"},{default:(0,a.w5)((()=>[(0,a.Wm)(g,null,{default:(0,a.w5)((()=>[(0,a.Wm)(b,null,{default:(0,a.w5)((()=>[(0,a._)("div",sa,[(0,a.Wm)(c,{modelValue:e.monster.spellcasting.atWillNotes,"onUpdate:modelValue":t[1]||(t[1]=t=>e.monster.spellcasting.atWillNotes=t),class:"col-12 q-pa-sm q-mb-sm","bottom-slots":"",label:e.$t("monster.spellcasting.atWillNotes")},{hint:(0,a.w5)((()=>[(0,a.Uk)((0,d.zw)(e.$t("editor.plainTextNote")),1)])),after:(0,a.w5)((()=>[(0,a.Wm)(r,{push:"",icon:e.monster.spellcasting.useCustomInnatePreamble?"edit":"edit_off",color:e.monster.spellcasting.useCustomInnatePreamble?"warning":"dark",size:"md",onClick:t[0]||(t[0]=t=>e.monster.spellcasting.useCustomInnatePreamble=!e.monster.spellcasting.useCustomInnatePreamble)},{default:(0,a.w5)((()=>[(0,a.Wm)(i,{class:"text-body2"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,d.zw)(e.monster.spellcasting.useCustomInnatePreamble?e.$t("editor.spellcasting.slot.useCustomPreamble"):e.$t("editor.spellcasting.slot.useDefaultPreamble")),1)])),_:1})])),_:1},8,["icon","color"])])),_:1},8,["modelValue","label"]),(0,a.Wm)(u,null,{default:(0,a.w5)((()=>[(0,a.wy)((0,a._)("div",ia,[(0,a.Wm)(m,{field:e.monster.spellcasting.customInnatePreamble,"i18n-label-key":"editor.spellcasting.innate.preamble","token-category":"spell","show-reset":!0,"onUpdate:modelValue":t[2]||(t[2]=t=>e.monster.spellcasting.customInnatePreamble=t),onReset:t[3]||(t[3]=t=>e.monster.spellcasting.customInnatePreamble=e.$t("presets.innateSpellcasting"))},null,8,["field"])],512),[[S.F8,e.monster.spellcasting.useCustomInnatePreamble]])])),_:1}),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.monster.spellcasting.atWill,(t=>((0,a.wg)(),(0,a.iD)(a.HY,{key:t.id},[(0,a.Wm)(c,{"model-value":t.count,label:e.$t("editor.spellcasting.innate.casts"),type:"number",class:"col-2 q-pa-sm","onUpdate:modelValue":l=>t.count=e.validateNumber(l,0)},null,8,["model-value","label","onUpdate:modelValue"]),(0,a.Wm)(p,{modelValue:t.rate,"onUpdate:modelValue":e=>t.rate=e,"display-value":e.$t(`recharge.${t.rate}`),options:e.rechargeTimeOptions,"emit-value":"",label:e.$t("editor.spellcasting.innate.recharge"),class:"col-3 q-pa-sm"},null,8,["modelValue","onUpdate:modelValue","display-value","options","label"]),(0,a.Wm)(k,{"model-value":t.spells,label:e.$t("editor.spellcasting.innate.list"),class:"col-7 q-pa-sm",onClear:e=>t.spells=[],"onUpdate:modelValue":e=>t.spells=e},{after:(0,a.w5)((()=>[(0,a.Wm)(r,{round:"",color:"negative",icon:"delete",onClick:l=>e.monster.deleteInnateSpellList(t.id)},{default:(0,a.w5)((()=>[(0,a.Wm)(i,{class:"text-body2"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,d.zw)(e.$t("editor.spellcasting.innate.delete")),1)])),_:1})])),_:2},1032,["onClick"])])),_:2},1032,["model-value","label","onClear","onUpdate:modelValue"])],64)))),128)),(0,a._)("div",ra,[(0,a.Wm)(r,{class:"full-width",color:"positive",onClick:e.monster.addInnateSpellList},{default:(0,a.w5)((()=>[(0,a.Uk)((0,d.zw)(e.$t("editor.spellcasting.innate.addNew")),1)])),_:1},8,["onClick"])])])])),_:1})])),_:1})])),_:1},8,["label","caption"])}function ca(e,t,l,o,n,s){const i=(0,a.up)("q-item-label"),r=(0,a.up)("q-item-section"),c=(0,a.up)("q-badge"),m=(0,a.up)("q-item"),u=(0,a.up)("q-select");return(0,a.wg)(),(0,a.j4)(u,{"model-value":e.$props.modelValue,label:e.$props.label,options:e.spellOptions,"use-chips":"",multiple:"","use-input":"",clearable:"","emit-value":"","input-debounce":"0",onFilter:e.spellFilter,"onUpdate:modelValue":t[0]||(t[0]=t=>e.$emit("update:model-value",t)),onClear:t[1]||(t[1]=t=>e.$emit("clear"))},{option:(0,a.w5)((t=>[(0,a.Wm)(m,(0,d.vs)((0,a.F4)(t.itemProps)),{default:(0,a.w5)((()=>[(0,a.Wm)(r,null,{default:(0,a.w5)((()=>[(0,a.Wm)(i,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,d.zw)(t.opt.label),1)])),_:2},1024),(0,a.Wm)(i,{caption:""},{default:(0,a.w5)((()=>[(0,a.Uk)((0,d.zw)(t.opt.classDisplay),1)])),_:2},1024)])),_:2},1024),(0,a.Wm)(r,{side:"",top:""},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{color:"purple-8",label:0===t.opt.level?e.$t("editor.spellcasting.slot.cantrip"):e.$t("editor.spellcasting.slot.level",{ordinal:e.spellLevels[t.opt.level]})},null,8,["label"])])),_:2},1024)])),_:2},1040)])),after:(0,a.w5)((()=>[(0,a.WI)(e.$slots,"after")])),_:3},8,["model-value","label","options","onFilter"])}const ma=(0,a.aZ)({name:"SearchableSpellSelect",props:{modelValue:{type:Object,required:!0},label:{type:String,required:!0}},emits:["update:model-value","clear"],setup(){const e=(0,Rl.i)(),t=(0,a.Fl)((()=>e.allSpellOptions)),l=(0,r.iH)([]),o=(0,f.DK)(t,l),{ordinalSpellLevels:n}=(0,ta.G)();return{spellOptions:l,spellFilter:o,spellLevels:n}}}),ua=(0,y.Z)(ma,[["render",ca]]),pa=ua;q()(ma,"components",{QSelect:x.Z,QItem:Ft.Z,QItemSection:Ht.Z,QItemLabel:Ot.Z,QBadge:aa.Z});const ka=(0,a.aZ)({name:"ClassCastingEditor",components:{MonsterTextEditor:ml,SearchableSpellSelect:pa},setup(){const e=(0,r.iH)(!1),t=(0,r.iH)(!1),l=(0,i.B)(),o=(0,Rl.i)(),{rechargeTimeOptions:n}=ll(),s=(0,ea.F)(),d=(0,a.Fl)((()=>t.value?o.allSpellOptions.filter((e=>e.class.find((e=>e.toLowerCase()===l.spellcasting.class?.toLowerCase())))):o.allSpellOptions)),c=(0,r.iH)([]),m=(0,f.DK)(d,c);return{monster:l,rechargeTimeOptions:n,spellOptions:c,spellFilter:m,showSlots:e,classFilter:t,spellOptionsByLevel:o.spellOptionsByLevel,validateNumber:Z.m,...s}}}),ba=(0,y.Z)(ka,[["render",da]]),ga=ba;function fa(){const{t:e}=(0,ht.QT)(),t=(0,a.Fl)((()=>({STR:e("statFull.STR"),DEX:e("statFull.DEX"),CON:e("statFull.CON"),INT:e("statFull.INT"),WIS:e("statFull.WIS"),CHA:e("statFull.CHA")}))),l=["STR","CON","DEX","INT","WIS","CHA"];return{statOptions:t,statOptionsShort:l}}q()(ka,"components",{QExpansionItem:U.Z,QCard:D.Z,QCardSection:Vt.Z,QInput:A.Z,QBtn:_.Z,QTooltip:W.Z,QSlideTransition:_l.Z,QSelect:x.Z});var wa=l(5594);const va=(0,a.aZ)({name:"SpellcastingEditor",components:{LockToggleButton:h,ClassCastingEditor:na,AtWillCastingEditor:ga},setup(){const e=(0,i.B)(),t=(0,Rl.i)(),l=(0,ea.F)(),{statOptionsShort:o}=fa(),n=(0,$l.Z)(),s=(0,a.Fl)((()=>null==e.spellcasting.class?"":e.spellcasting.class in l.SrdClass.value?l.SrdClass.value[e.spellcasting.class]:e.spellcasting.class)),r=(0,a.Fl)((()=>e.spellcasting.save.override?e.spellcasting.save.overrideValue:e.defaultSpellSave(e.spellcasting.stat))),d=(0,a.Fl)((()=>e.spellcasting.attack.override?e.spellcasting.attack.overrideValue:e.defaultSpellAttackModifier(e.spellcasting.stat))),c=(0,a.Fl)((()=>e.spellcasting.modifier.override?e.spellcasting.modifier.overrideValue:e.defaultSpellModifier(e.spellcasting.stat))),m=()=>{n.dialog({component:wa.Z})};return{monster:e,statOptions:o,spellSaveValue:r,spellAttackValue:d,spellModifierValue:c,classDisplayValue:s,spellOptionsByLevel:t.spellOptionsByLevel,addSpell:m,...l}}}),ya=(0,y.Z)(va,[["render",Nl]]),_a=ya;function Wa(e,t,l,o,n,s){const i=(0,a.up)("attack-panel"),r=(0,a.up)("q-list"),d=(0,a.up)("q-card-section"),c=(0,a.up)("q-btn"),m=(0,a.up)("q-card-actions"),u=(0,a.up)("q-card"),p=(0,a.up)("q-expansion-item");return(0,a.wg)(),(0,a.j4)(p,{"expand-separator":"",icon:"mdi-sword",label:e.$t("editor.attack.label")},{default:(0,a.w5)((()=>[(0,a.Wm)(u,null,{default:(0,a.w5)((()=>[(0,a.Wm)(d,{class:"row"},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{bordered:"",separator:"",class:"rounded-borders bg-red-10 full-width"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.monster.attacks,(e=>((0,a.wg)(),(0,a.j4)(i,{id:e.id,key:e.id},null,8,["id"])))),128))])),_:1})])),_:1}),(0,a.Wm)(m,null,{default:(0,a.w5)((()=>[(0,a.Wm)(c,{color:"positive",class:"full-width",label:e.$t("editor.attack.add"),onClick:t[0]||(t[0]=t=>e.monster.addNewAttack())},null,8,["label"])])),_:1})])),_:1})])),_:1},8,["label"])}q()(va,"components",{QExpansionItem:U.Z,QCard:D.Z,QSelect:x.Z,QInput:A.Z,QBtn:_.Z,QTooltip:W.Z,QList:zt.Z});const Ca={class:"row"},qa={class:"row"},$a={class:"col-12 q-mt-md"};function ha(e,t,l,o,n,s){const i=(0,a.up)("q-input"),r=(0,a.up)("q-tooltip"),c=(0,a.up)("q-btn"),m=(0,a.up)("q-btn-group"),u=(0,a.up)("q-select"),p=(0,a.up)("q-card-section"),k=(0,a.up)("lock-toggle-button"),b=(0,a.up)("q-card"),g=(0,a.up)("q-expansion-item"),f=(0,a.up)("q-card-actions"),w=(0,a.up)("q-list"),v=(0,a.up)("monster-text-editor"),y=(0,a.up)("q-slide-transition");return(0,a.wg)(),(0,a.j4)(g,{label:e.attack.name,"expand-separator":"",caption:e.estimatedAttackDamage},{default:(0,a.w5)((()=>[(0,a.Wm)(b,null,{default:(0,a.w5)((()=>[(0,a.Wm)(p,{class:"row"},{default:(0,a.w5)((()=>[(0,a.Wm)(i,{modelValue:e.attack.name,"onUpdate:modelValue":t[0]||(t[0]=t=>e.attack.name=t),label:e.$t("monster.attack.name"),class:"col-7 q-pa-sm"},null,8,["modelValue","label"]),(0,a.Wm)(i,{"model-value":e.attack.targets,label:e.$t("monster.attack.targets"),class:"col-1 q-pa-sm",type:"number","onUpdate:modelValue":t[1]||(t[1]=t=>e.attack.targets=e.validateNumber(t,1))},null,8,["model-value","label"]),(0,a.Wm)(i,{"model-value":e.attackModifier,label:e.$t("monster.attack.bonus"),type:"number",class:"col-4 q-pa-sm",disable:!e.attack.modifier.override,"onUpdate:modelValue":t[5]||(t[5]=t=>e.attack.modifier.overrideValue=e.validateNumber(t,0))},{after:(0,a.w5)((()=>[(0,a.Wm)(m,{push:""},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{push:"",color:e.attack.modifier.proficient?"positive":"dark",icon:"keyboard_arrow_up",onClick:t[2]||(t[2]=t=>e.attack.modifier.proficient=!e.attack.modifier.proficient)},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{class:"text-body2"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,d.zw)(e.$t("editor.proficient")),1)])),_:1})])),_:1},8,["color"]),(0,a.Wm)(c,{push:"",color:e.attack.modifier.override?"warning":"dark",icon:"handyman",onClick:t[3]||(t[3]=t=>e.attack.modifier.override=!e.attack.modifier.override)},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{class:"text-body2"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,d.zw)(e.$t("editor.override")),1)])),_:1})])),_:1},8,["color"])])),_:1}),(0,a.Wm)(c,{round:"",icon:"save",color:"primary",class:"q-ml-sm",onClick:t[4]||(t[4]=t=>e.addTemplate(e.attack))},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{class:"text-body2"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,d.zw)(e.$t("editor.attack.save")),1)])),_:1})])),_:1})])),_:1},8,["model-value","label","disable"]),(0,a.Wm)(u,{modelValue:e.attack.modifier.stat,"onUpdate:modelValue":t[6]||(t[6]=t=>e.attack.modifier.stat=t),options:e.statOptions,label:e.$t("monster.attack.stat"),class:"col-2 q-pa-sm"},null,8,["modelValue","options","label"]),(0,a.Wm)(u,{modelValue:e.attack.distance,"onUpdate:modelValue":t[7]||(t[7]=t=>e.attack.distance=t),label:e.$t("monster.attack.range"),"display-value":e.$t(`range.${e.attack.distance}`),options:e.rangeOptions,"emit-value":"",class:"col-4 q-pa-sm"},null,8,["modelValue","label","display-value","options"]),(0,a.Wm)(u,{modelValue:e.attack.kind,"onUpdate:modelValue":t[8]||(t[8]=t=>e.attack.kind=t),label:e.$t("monster.attack.kind"),"display-value":e.$t(`kind.${e.attack.kind}`),options:e.kindOptions,"emit-value":"",class:"col-2 q-pa-sm"},null,8,["modelValue","label","display-value","options"]),(0,a.wy)((0,a.Wm)(i,{"model-value":e.attack.range.reach,label:e.$t("monster.attack.reach"),type:"number",min:"0",step:"5",suffix:"ft",class:"col-1 q-pa-sm","onUpdate:modelValue":t[9]||(t[9]=t=>e.attack.range.reach=e.validateNumber(t,0))},null,8,["model-value","label"]),[[S.F8,"MELEE"===e.attack.distance||"BOTH"===e.attack.distance]]),(0,a.wy)((0,a.Wm)(i,{"model-value":e.attack.range.standard,label:e.$t("monster.attack.close"),type:"number",min:"0",step:"5",suffix:"ft",class:"col-1 q-pa-sm","onUpdate:modelValue":t[10]||(t[10]=t=>e.attack.range.standard=e.validateNumber(t,0))},null,8,["model-value","label"]),[[S.F8,"RANGED"===e.attack.distance||"BOTH"===e.attack.distance]]),(0,a.wy)((0,a.Wm)(i,{"model-value":e.attack.range.long,label:e.$t("monster.attack.long"),type:"number",min:"0",step:"5",suffix:"ft",class:"col-1 q-pa-sm","onUpdate:modelValue":t[11]||(t[11]=t=>e.attack.range.long=e.validateNumber(t,0))},null,8,["model-value","label"]),[[S.F8,"RANGED"===e.attack.distance||"BOTH"===e.attack.distance]]),(0,a.Wm)(i,{"model-value":e.attack.save,label:e.$t("monster.attack.effectDc"),type:"number",class:"col-1 q-pa-sm","onUpdate:modelValue":t[12]||(t[12]=t=>e.attack.save=e.validateNumber(t,0))},null,8,["model-value","label"])])),_:1}),(0,a.Wm)(p,null,{default:(0,a.w5)((()=>[(0,a.Wm)(w,{bordered:"",separator:"",class:"rounded-borders bg-pink-10 full-width"},{default:(0,a.w5)((()=>[(0,a.Wm)(g,{"expand-separator":"","default-opened":"",label:e.$t("editor.attack.primary")},{default:(0,a.w5)((()=>[(0,a.Wm)(b,null,{default:(0,a.w5)((()=>[(0,a.Wm)(p,null,{default:(0,a.w5)((()=>[(0,a._)("div",Ca,[(0,a.Wm)(i,{"model-value":e.attack.damage.count,label:e.$t("monster.attack.count"),type:"number",min:"0",class:"col-2 q-pa-sm","onUpdate:modelValue":t[13]||(t[13]=t=>e.attack.damage.count=e.validateNumber(t,0))},null,8,["model-value","label"]),(0,a.Wm)(u,{modelValue:e.attack.damage.dice,"onUpdate:modelValue":t[14]||(t[14]=t=>e.attack.damage.dice=t),options:e.diceOptions,"emit-value":"","display-value":e.diceLookup[e.attack.damage.dice],label:e.$t("monster.attack.dieType"),class:"col-2 q-pa-sm"},null,8,["modelValue","options","display-value","label"]),(0,a.Wm)(u,{modelValue:e.attack.damage.type,"onUpdate:modelValue":t[15]||(t[15]=t=>e.attack.damage.type=t),label:e.$t("monster.attack.damageType"),options:e.attackTypeDefaults,"use-input":"","new-value-mode":"add-unique",class:"col-4 q-pa-sm"},null,8,["modelValue","label","options"]),(0,a.Wm)(i,{"model-value":e.attackDamageModifier,type:"number",label:e.$t("monster.attack.damageBonus"),disable:!e.attack.damage.modifier.override,class:"col-2 q-pa-sm",onChange:t[17]||(t[17]=t=>e.attack.damage.modifier.overrideValue=e.validateNumber(t,0))},{after:(0,a.w5)((()=>[(0,a.Wm)(k,{locked:!e.attack.damage.modifier.override,"lock-tooltip":e.$t("editor.attack.lockedToStats"),"unlock-tooltip":e.$t("editor.attack.unlockedFromStats"),onClick:t[16]||(t[16]=t=>e.attack.damage.modifier.override=!e.attack.damage.modifier.override)},null,8,["locked","lock-tooltip","unlock-tooltip"])])),_:1},8,["model-value","label","disable"]),(0,a.Wm)(u,{modelValue:e.attack.damage.modifier.stat,"onUpdate:modelValue":t[18]||(t[18]=t=>e.attack.damage.modifier.stat=t),label:e.$t("monster.attack.stat"),class:"col-2 q-pa-sm",options:e.statOptions},null,8,["modelValue","label","options"])])])),_:1})])),_:1})])),_:1},8,["label"]),(0,a.Wm)(g,{"expand-separator":"",label:e.$t("editor.attack.additional"),caption:e.$t("editor.attack.additionalCaption")},{default:(0,a.w5)((()=>[(0,a.Wm)(b,null,{default:(0,a.w5)((()=>[(0,a.Wm)(p,null,{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.attack.additionalDamage,(t=>((0,a.wg)(),(0,a.iD)("div",{key:t.id,class:"row"},[(0,a.Wm)(i,{"model-value":t.count,label:e.$t("monster.attack.count"),type:"number",class:"col-2 q-pa-sm","onUpdate:modelValue":l=>t.count=e.validateNumber(l,0)},null,8,["model-value","label","onUpdate:modelValue"]),(0,a.Wm)(u,{modelValue:t.dice,"onUpdate:modelValue":e=>t.dice=e,options:e.diceOptions,"emit-value":"","display-value":e.diceLookup[e.attack.damage.dice],label:e.$t("monster.attack.dieType"),class:"col-2 q-pa-sm"},null,8,["modelValue","onUpdate:modelValue","options","display-value","label"]),(0,a.Wm)(u,{modelValue:t.type,"onUpdate:modelValue":e=>t.type=e,label:e.$t("monster.attack.damageType"),options:e.attackTypeDefaults,"use-input":"","new-value-mode":"add-unique",class:"col-4 q-pa-sm"},null,8,["modelValue","onUpdate:modelValue","label","options"]),(0,a.Wm)(i,{modelValue:t.note,"onUpdate:modelValue":e=>t.note=e,label:e.$t("editor.attack.additionalNote"),class:"col-4 q-pa-sm"},{after:(0,a.w5)((()=>[(0,a.Wm)(c,{round:"",color:"negative",icon:"delete",onClick:()=>e.deleteAdditionalDamage(t.id)},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{class:"text-body2"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,d.zw)(e.$t("editor.delete")),1)])),_:1})])),_:2},1032,["onClick"])])),_:2},1032,["modelValue","onUpdate:modelValue","label"])])))),128))])),_:1}),(0,a.Wm)(f,null,{default:(0,a.w5)((()=>[(0,a.Wm)(c,{color:"positive",onClick:e.addAdditionalDamage},{default:(0,a.w5)((()=>[(0,a.Uk)((0,d.zw)(e.$t("editor.attack.addAdditional")),1)])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1},8,["label","caption"]),(0,a.Wm)(g,{"expand-separator":"",label:e.$t("editor.attack.conditional"),caption:e.$t("editor.attack.conditionalCaption")},{default:(0,a.w5)((()=>[(0,a.Wm)(b,null,{default:(0,a.w5)((()=>[(0,a.Wm)(p,null,{default:(0,a.w5)((()=>[(0,a._)("div",qa,[(0,a.Wm)(i,{modelValue:e.attack.alternateDamage.condition,"onUpdate:modelValue":t[20]||(t[20]=t=>e.attack.alternateDamage.condition=t),disable:!e.attack.alternateDamage.active,label:e.$t("editor.attack.condition"),class:"col-12"},{before:(0,a.w5)((()=>[(0,a.Wm)(c,{push:"",color:e.attack.alternateDamage.active?"primary":"dark",onClick:t[19]||(t[19]=t=>e.attack.alternateDamage.active=!e.attack.alternateDamage.active)},{default:(0,a.w5)((()=>[(0,a.Uk)((0,d.zw)(e.attack.alternateDamage.active?e.$t("editor.attack.enableConditional"):e.$t("editor.attack.disableConditional")),1)])),_:1},8,["color"])])),_:1},8,["modelValue","disable","label"]),(0,a.Wm)(i,{"model-value":e.attack.alternateDamage.count,disable:!e.attack.alternateDamage.active,label:e.$t("monster.attack.count"),type:"number",class:"col-2 q-pa-sm","onUpdate:modelValue":t[21]||(t[21]=t=>e.attack.alternateDamage.count=e.validateNumber(t,0))},null,8,["model-value","disable","label"]),(0,a.Wm)(u,{modelValue:e.attack.alternateDamage.dice,"onUpdate:modelValue":t[22]||(t[22]=t=>e.attack.alternateDamage.dice=t),disable:!e.attack.alternateDamage.active,options:e.diceOptions,"emit-value":"","display-value":e.diceLookup[e.attack.damage.dice],label:e.$t("monster.attack.dieType"),class:"col-2 q-pa-sm"},null,8,["modelValue","disable","options","display-value","label"]),(0,a.Wm)(u,{modelValue:e.attack.alternateDamage.type,"onUpdate:modelValue":t[23]||(t[23]=t=>e.attack.alternateDamage.type=t),disable:!e.attack.alternateDamage.active,label:e.$t("monster.attack.damageType"),options:e.attackTypeDefaults,"use-input":"","new-value-mode":"add-unique",class:"col-4 q-pa-sm"},null,8,["modelValue","disable","label","options"]),(0,a.Wm)(i,{"model-value":e.conditionalDamageModifier,type:"number",label:e.$t("monster.attack.damageBonus"),disable:e.conditionalModifierLocked,class:"col-2 q-pa-sm",onChange:t[25]||(t[25]=t=>e.attack.alternateDamage.modifier.overrideValue=e.validateNumber(t,0))},{after:(0,a.w5)((()=>[(0,a.Wm)(k,{locked:!e.attack.alternateDamage.modifier.override,"lock-tooltip":e.$t("editor.attack.lockedToStats"),"unlock-tooltip":e.$t("editor.attack.unlockedFromStats"),onClick:t[24]||(t[24]=t=>e.attack.alternateDamage.modifier.override=!e.attack.alternateDamage.modifier.override)},null,8,["locked","lock-tooltip","unlock-tooltip"])])),_:1},8,["model-value","label","disable"]),(0,a.Wm)(u,{modelValue:e.attack.alternateDamage.modifier.stat,"onUpdate:modelValue":t[26]||(t[26]=t=>e.attack.alternateDamage.modifier.stat=t),disable:!e.attack.alternateDamage.active,label:e.$t("monster.attack.stat"),class:"col-2 q-pa-sm",options:e.statOptions},null,8,["modelValue","disable","label","options"])])])),_:1})])),_:1})])),_:1},8,["label","caption"])])),_:1})])),_:1}),(0,a.Wm)(p,{class:"row"},{default:(0,a.w5)((()=>[(0,a.Wm)(i,{modelValue:e.attack.description,"onUpdate:modelValue":t[28]||(t[28]=t=>e.attack.description=t),label:e.$t("editor.attack.description"),class:"col-12"},{after:(0,a.w5)((()=>[(0,a.Wm)(c,{push:"",icon:e.attack.useCustomRenderer?"edit":"edit_off",color:e.attack.useCustomRenderer?"warning":"dark",size:"md",onClick:t[27]||(t[27]=t=>e.attack.useCustomRenderer=!e.attack.useCustomRenderer)},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{class:"text-body2"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,d.zw)(e.attack.useCustomRenderer?e.$t("editor.attack.useCustomRenderer"):e.$t("editor.attack.useDefaultRenderer")),1)])),_:1})])),_:1},8,["icon","color"])])),_:1},8,["modelValue","label"]),(0,a.Wm)(y,null,{default:(0,a.w5)((()=>[(0,a.wy)((0,a._)("div",$a,[(0,a.Wm)(v,{field:e.attack.customRenderer,"i18n-label-key":"editor.attack.customRenderer","token-category":"attack","show-reset":!0,"onUpdate:modelValue":t[29]||(t[29]=t=>e.attack.customRenderer=t),onReset:t[30]||(t[30]=t=>e.attack.customRenderer=e.$t("presets.attack"))},null,8,["field"])],512),[[S.F8,e.attack.useCustomRenderer]])])),_:1})])),_:1}),(0,a.Wm)(f,null,{default:(0,a.w5)((()=>[(0,a.Wm)(c,{class:"full-width",color:"negative",label:e.$t("editor.attack.delete"),onClick:e.deleteAttack},null,8,["label","onClick"])])),_:1})])),_:1})])),_:1},8,["label","caption"])}function Za(){const{t:e}=(0,ht.QT)(),t=(0,a.Fl)((()=>({MELEE:e("range.MELEE"),RANGED:e("range.RANGED"),BOTH:e("range.BOTH")}))),l=(0,a.Fl)((()=>({WEAPON:e("kind.WEAPON"),SPELL:e("kind.SPELL")}))),o=(0,a.Fl)((()=>Object.entries(t.value).map((([e,t])=>({value:e,label:t}))))),n=(0,a.Fl)((()=>Object.entries(l.value).map((([e,t])=>({value:e,label:t})))));return{range:t,kind:l,rangeOptions:o,kindOptions:n}}const Va=(0,a.aZ)({name:"AttackPanel",components:{LockToggleButton:h,MonsterTextEditor:ml},props:{id:{type:String,required:!0}},setup(e){const{t}=(0,ht.QT)(),l=(0,i.B)(),o=(0,a.Fl)((()=>l.attacks.find((t=>t.id===e.id)))),{statOptionsShort:n}=fa(),{rangeOptions:s,kindOptions:r}=Za(),{attackTypeDefaults:d}=Gt(),c=k.m1,m=k.cY,u=(0,a.Fl)((()=>l.attackModifier(e.id))),p=(0,a.Fl)((()=>l.attackDamageModifier(e.id))),b=(0,a.Fl)((()=>l.conditionalDamageModifier(e.id))),g=()=>l.addAdditionalDamage(e.id),f=t=>l.deleteAdditionalDamage(e.id,t),w=()=>{l.deleteAttack(e.id)},v=(0,a.Fl)((()=>{const e=l.expectedAttackDamage(o.value);return t("editor.attack.estimatedAttackDamage",[e])})),y=(0,$l.Z)(),_=(0,hl.Z)(),W=e=>{y.dialog({component:Ll,componentProps:{targetName:e.name}}).onOk((({name:l,icon:a})=>{_.addCustomAttack(e,l,a),y.notify({message:t("editor.template.added",[l]),type:"positive"})}))};return{attack:o,attackModifier:u,deleteAttack:w,statOptions:n,rangeOptions:s,kindOptions:r,diceOptions:c,diceLookup:m,attackTypeDefaults:d,attackDamageModifier:p,addAdditionalDamage:g,deleteAdditionalDamage:f,conditionalDamageModifier:b,conditionalModifierLocked:(0,a.Fl)((()=>!o.value.alternateDamage.active||!o.value.alternateDamage.modifier.override)),estimatedAttackDamage:v,addTemplate:W,validateNumber:Z.m}}}),Ua=(0,y.Z)(Va,[["render",ha]]),Da=Ua;q()(Va,"components",{QExpansionItem:U.Z,QCard:D.Z,QCardSection:Vt.Z,QInput:A.Z,QBtnGroup:yt.Z,QBtn:_.Z,QTooltip:W.Z,QSelect:x.Z,QList:zt.Z,QCardActions:Ut.Z,QSlideTransition:_l.Z});const Aa=(0,a.aZ)({name:"AttacksEditor",components:{AttackPanel:Da},setup(){const e=(0,i.B)();return{monster:e}}}),xa=(0,y.Z)(Aa,[["render",Wa]]),Qa=xa;q()(Aa,"components",{QExpansionItem:U.Z,QCard:D.Z,QCardSection:Vt.Z,QList:zt.Z,QCardActions:Ut.Z,QBtn:_.Z});const Ta={class:"text-overline text-uppercase"},Sa={class:"text-caption"},za={class:"flex items-center",style:{"flex-wrap":"nowrap",gap:"10px"}},Fa={class:"flex justify-start items-center"},Ha={class:"full-width",style:{"flex-shrink":"1"}},Oa={class:"flex justify-end items-center"},La={class:"full-width flex items-center justify-center text-h6"},Ma={class:"col-12 q-mt-md"},Ea={class:"text-caption full-width"};function Ia(e,t,l,o,n,s){const i=(0,a.up)("q-card-section"),r=(0,a.up)("q-item-section"),c=(0,a.up)("q-item"),m=(0,a.up)("q-separator"),u=(0,a.up)("q-item-label"),p=(0,a.up)("q-list"),k=(0,a.up)("q-btn-dropdown"),b=(0,a.up)("q-chip"),g=(0,a.up)("q-tooltip"),f=(0,a.up)("q-btn"),w=(0,a.up)("q-card"),v=(0,a.up)("q-input"),y=(0,a.up)("monster-text-editor"),_=(0,a.up)("q-slide-transition"),W=(0,a.up)("q-card-actions"),C=(0,a.up)("q-expansion-item"),q=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.j4)(C,{"expand-separator":"",icon:"mdi-sword-cross",label:e.$t("editor.multiattack.label")},{default:(0,a.w5)((()=>[(0,a.Wm)(w,null,{default:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(i,null,{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.multiattacks,((t,l)=>((0,a.wg)(),(0,a.j4)(w,{key:t.id,bordered:""},{default:(0,a.w5)((()=>[(0,a.Wm)(i,{class:"bg-red-10"},{default:(0,a.w5)((()=>[(0,a._)("div",Ta,(0,d.zw)(e.$t("editor.multiattack.group",[l+1])),1),(0,a._)("div",Sa,(0,d.zw)(e.$t("editor.multiattack.estimatedDamage",[e.monster.expectedMultiattackDamage(t.id)])),1)])),_:2},1024),(0,a.Wm)(i,null,{default:(0,a.w5)((()=>[(0,a._)("div",za,[(0,a._)("div",Fa,[(0,a.Wm)(k,{color:"positive",rounded:"",icon:"add"},{default:(0,a.w5)((()=>[(0,a.Wm)(p,null,{default:(0,a.w5)((()=>[e.monster.attacks.length>0?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[(0,a.Wm)(c,{class:"bg-blue-10"},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{class:"text-overline text-uppercase"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,d.zw)(e.$t("editor.multiattack.attackHeader")),1)])),_:1})])),_:1}),(0,a.Wm)(m),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.monster.attacks,(l=>(0,a.wy)(((0,a.wg)(),(0,a.j4)(c,{key:l.id,clickable:"",onClick:a=>e.monster.addMultiattackAttack(t.id,l.id)},{default:(0,a.w5)((()=>[(0,a.Wm)(r,null,{default:(0,a.w5)((()=>[(0,a.Wm)(u,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,d.zw)(l.name),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])),[[q]]))),128))],64)):(0,a.kq)("",!0),e.monster.actions.length>0?((0,a.wg)(),(0,a.iD)(a.HY,{key:1},[(0,a.Wm)(m),(0,a.Wm)(c,{class:"bg-blue-10"},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{class:"text-overline text-uppercase"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,d.zw)(e.$t("editor.multiattack.actionHeader")),1)])),_:1})])),_:1}),(0,a.Wm)(m),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.monster.actions,(l=>(0,a.wy)(((0,a.wg)(),(0,a.j4)(c,{key:l.id,clickable:"",onClick:a=>e.monster.addMultiattackAction(t.id,l.id)},{default:(0,a.w5)((()=>[(0,a.Wm)(r,null,{default:(0,a.w5)((()=>[(0,a.Wm)(u,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,d.zw)(l.name),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])),[[q]]))),128))],64)):(0,a.kq)("",!0)])),_:2},1024)])),_:2},1024)]),(0,a._)("div",Ha,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t.attacks,((l,o)=>((0,a.wg)(),(0,a.j4)(b,{key:o,color:"primary",removable:"",onRemove:a=>e.monster.removeMultiattackAttack(t.id,l)},{default:(0,a.w5)((()=>[(0,a.Uk)((0,d.zw)(e.monster.attackName(l)),1)])),_:2},1032,["onRemove"])))),128)),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t.actions,((l,o)=>((0,a.wg)(),(0,a.j4)(b,{key:o,color:"primary",removable:"",onRemove:a=>e.monster.removeMultiattackAction(t.id,l)},{default:(0,a.w5)((()=>[(0,a.Uk)((0,d.zw)(e.monster.actionName(l)),1)])),_:2},1032,["onRemove"])))),128))]),(0,a._)("div",Oa,[(0,a.Wm)(f,{round:"",color:"negative",icon:"delete",onClick:l=>e.monster.deleteMultiattack(t.id)},{default:(0,a.w5)((()=>[(0,a.Wm)(g,{class:"text-body2"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,d.zw)(e.$t("editor.delete")),1)])),_:1})])),_:2},1032,["onClick"])])])])),_:2},1024)])),_:2},1024)))),128))])),_:1},512),[[S.F8,e.multiattacks.length>0]]),(0,a.wy)((0,a.Wm)(i,null,{default:(0,a.w5)((()=>[(0,a.Wm)(w,{bordered:""},{default:(0,a.w5)((()=>[(0,a.Wm)(i,null,{default:(0,a.w5)((()=>[(0,a._)("div",La,(0,d.zw)(e.$t("editor.multiattack.none")),1)])),_:1})])),_:1})])),_:1},512),[[S.F8,0===e.multiattacks.length]]),(0,a.Wm)(i,{class:"row"},{default:(0,a.w5)((()=>[(0,a.Wm)(v,{modelValue:e.monster.multiattackOptions.postscript,"onUpdate:modelValue":t[1]||(t[1]=t=>e.monster.multiattackOptions.postscript=t),label:e.$t("editor.multiattack.postscript"),class:"col-12"},{after:(0,a.w5)((()=>[(0,a.Wm)(f,{push:"",icon:e.monster.multiattackOptions.useCustomRenderer?"edit":"edit_off",color:e.monster.multiattackOptions.useCustomRenderer?"warning":"dark",size:"md",onClick:t[0]||(t[0]=t=>e.monster.multiattackOptions.useCustomRenderer=!e.monster.multiattackOptions.useCustomRenderer)},{default:(0,a.w5)((()=>[(0,a.Wm)(g,{class:"text-body2"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,d.zw)(e.monster.multiattackOptions.useCustomRenderer?e.$t("editor.attack.useCustomRenderer"):e.$t("editor.attack.useDefaultRenderer")),1)])),_:1})])),_:1},8,["icon","color"])])),_:1},8,["modelValue","label"]),(0,a.Wm)(_,null,{default:(0,a.w5)((()=>[(0,a.wy)((0,a._)("div",Ma,[(0,a.Wm)(y,{field:e.monster.multiattackOptions.customMultiattackRenderer,"i18n-label-key":"editor.multiattack.label","show-reset":!0,"onUpdate:modelValue":t[2]||(t[2]=t=>e.monster.multiattackOptions.customMultiattackRenderer=t),onReset:t[3]||(t[3]=t=>e.monster.multiattackOptions.customMultiattackRenderer="{multiattack.all}. {multiattack.postscript}")},null,8,["field"]),(0,a._)("div",Ea,(0,d.zw)(e.$t("editor.multiattack.help")),1)],512),[[S.F8,e.monster.multiattackOptions.useCustomRenderer]])])),_:1})])),_:1}),(0,a.Wm)(W,null,{default:(0,a.w5)((()=>[(0,a.Wm)(f,{color:"positive",class:"full-width",label:e.$t("editor.multiattack.add"),onClick:e.monster.addMultiattack},null,8,["label","onClick"])])),_:1})])),_:1})])),_:1},8,["label"])}const Pa=(0,a.aZ)({name:"MultiattackEditor",components:{MonsterTextEditor:ml},setup(){const e=(0,i.B)();return{monster:e,multiattacks:(0,a.Fl)((()=>e.multiattacks))}}});var Ba=l(7691);const Na=(0,y.Z)(Pa,[["render",Ia]]),Ra=Na;function ja(e,t,l,o,n,s){const i=(0,a.up)("q-tooltip"),r=(0,a.up)("q-btn"),c=(0,a.up)("q-input"),m=(0,a.up)("q-select"),u=(0,a.up)("monster-text-editor"),p=(0,a.up)("cr-annotation-card"),k=(0,a.up)("q-card-section"),b=(0,a.up)("q-card-actions"),g=(0,a.up)("q-card"),f=(0,a.up)("q-expansion-item"),w=(0,a.up)("q-list");return(0,a.wg)(),(0,a.j4)(f,{"expand-separator":"",icon:"mdi-movie-open",label:e.$t("editor.action.label")},{default:(0,a.w5)((()=>[(0,a.Wm)(g,null,{default:(0,a.w5)((()=>[(0,a.Wm)(k,{class:"row"},{default:(0,a.w5)((()=>[(0,a.Wm)(w,{bordered:"",separator:"",class:"rounded-borders bg-amber-10 full-width"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.actions,((t,l)=>((0,a.wg)(),(0,a.j4)(f,{key:t.id,label:t.name,"expand-separator":""},{default:(0,a.w5)((()=>[(0,a.Wm)(g,null,{default:(0,a.w5)((()=>[(0,a.Wm)(k,{class:"row"},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{modelValue:t.name,"onUpdate:modelValue":e=>t.name=e,label:e.$t("monster.trait.name"),class:"col-12 q-pa-sm"},{after:(0,a.w5)((()=>[(0,a.Wm)(r,{push:"",color:t.legendaryOnly?"positive":"dark",icon:"fa-solid fa-dragon",class:"q-mr-sm",label:t.legendaryOnly?e.$t("editor.action.legendaryOnly"):e.$t("editor.action.regular"),onClick:e=>t.legendaryOnly=!t.legendaryOnly},{default:(0,a.w5)((()=>[(0,a.Wm)(i,{class:"text-body2"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,d.zw)(e.$t("editor.action.legendaryExplanation")),1)])),_:1})])),_:2},1032,["color","label","onClick"]),(0,a.Wm)(r,{round:"",icon:"save",color:"primary",onClick:l=>e.addTemplate(t)},{default:(0,a.w5)((()=>[(0,a.Wm)(i,{class:"text-body2"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,d.zw)(e.$t("editor.action.save")),1)])),_:1})])),_:2},1032,["onClick"])])),_:2},1032,["modelValue","onUpdate:modelValue","label"]),(0,a.Wm)(c,{modelValue:t.recharge,"onUpdate:modelValue":e=>t.recharge=e,class:"col-4 q-pa-sm",label:e.$t("monster.action.recharge")},null,8,["modelValue","onUpdate:modelValue","label"]),(0,a.Wm)(c,{"model-value":t.limitedUse.count,type:"number",min:"0",class:"col-4 q-pa-sm",label:e.$t("monster.trait.limitedUse.count"),"onUpdate:modelValue":l=>t.limitedUse.count=e.validateNumber(l,0)},null,8,["model-value","label","onUpdate:modelValue"]),(0,a.Wm)(m,{modelValue:t.limitedUse.rate,"onUpdate:modelValue":e=>t.limitedUse.rate=e,"display-value":e.$t(`recharge.${t.limitedUse.rate}`),options:e.rechargeTimeOptions,"emit-value":"",label:e.$t("monster.trait.limitedUse.rate"),class:"col-4 q-pa-sm"},null,8,["modelValue","onUpdate:modelValue","display-value","options","label"]),(0,a.Wm)(u,{field:t.description,"i18n-label-key":"monster.trait.description","token-category":"action","onUpdate:modelValue":l=>{t.description=l,e.autoUpdateCr(t.description,t.crAnnotation)}},null,8,["field","onUpdate:modelValue"]),(0,a.Wm)(p,{field:"actions",index:l},null,8,["index"])])),_:2},1024),(0,a.Wm)(b,{align:"center"},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{color:"negative",class:"full-width",label:e.$t("editor.action.delete"),onClick:()=>e.monster.deleteAction(t.id)},null,8,["label","onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1032,["label"])))),128))])),_:1})])),_:1}),(0,a.Wm)(b,{align:"center"},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{color:"positive",class:"full-width",label:e.$t("editor.action.add"),onClick:e.monster.addAction},null,8,["label","onClick"])])),_:1})])),_:1})])),_:1},8,["label"])}q()(Pa,"components",{QExpansionItem:U.Z,QCard:D.Z,QCardSection:Vt.Z,QBtnDropdown:St.Z,QList:zt.Z,QItem:Ft.Z,QItemSection:Ht.Z,QSeparator:Wl.Z,QItemLabel:Ot.Z,QChip:Ba.Z,QBtn:_.Z,QTooltip:W.Z,QInput:A.Z,QSlideTransition:_l.Z,QCardActions:Ut.Z}),q()(Pa,"directives",{ClosePopup:Lt.Z});const Ka=(0,a.aZ)({name:"ActionsEditor",components:{MonsterTextEditor:ml,CrAnnotationCard:ql},setup(){const e=(0,i.B)(),{rechargeTimeOptions:t}=ll(),{autoUpdateCr:l,printCrSummary:o}=ul(),n=(0,$l.Z)(),{t:s}=(0,ht.QT)(),r=(0,hl.Z)(),d=e=>{n.dialog({component:Ll,componentProps:{targetName:e.name}}).onOk((({name:t,icon:l})=>{r.addCustomAction(e,t,l),n.notify({message:s("editor.template.added",[t]),type:"positive"})}))};return{monster:e,actions:(0,a.Fl)((()=>e.actions)),rechargeTimeOptions:t,autoUpdateCr:l,printCrSummary:o,addTemplate:d,validateNumber:Z.m}}}),Ya=(0,y.Z)(Ka,[["render",ja]]),Ga=Ya;q()(Ka,"components",{QExpansionItem:U.Z,QCard:D.Z,QCardSection:Vt.Z,QList:zt.Z,QInput:A.Z,QBtn:_.Z,QTooltip:W.Z,QSelect:x.Z,QCardActions:Ut.Z});const Xa={class:"col-9 q-pa-sm flex items-center"},Ja={class:"col-12 q-mt-md"},eo={class:"col-8 text-h6 flex items-center"},to={class:"col-4"};function lo(e,t,l,o,n,s){const i=(0,a.up)("q-tooltip"),r=(0,a.up)("q-btn"),c=(0,a.up)("q-input"),m=(0,a.up)("q-item-label"),u=(0,a.up)("q-item-section"),p=(0,a.up)("q-badge"),k=(0,a.up)("q-item"),b=(0,a.up)("q-list"),g=(0,a.up)("q-btn-dropdown"),f=(0,a.up)("monster-text-editor"),w=(0,a.up)("q-slide-transition"),v=(0,a.up)("q-card-section"),y=(0,a.up)("q-card"),_=(0,a.up)("q-expansion-item"),W=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.j4)(_,{"expand-separator":"",icon:"fa-solid fa-dragon",label:e.$t("editor.legendary.label"),caption:e.$t("editor.legendary.caption")},{default:(0,a.w5)((()=>[(0,a.Wm)(y,null,{default:(0,a.w5)((()=>[(0,a.Wm)(v,{class:"row"},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{"model-value":e.monster.legendaryActions.count,type:"number",min:"0",label:e.$t("editor.legendary.count"),class:"col-3 q-pa-sm","onUpdate:modelValue":t[1]||(t[1]=t=>e.monster.legendaryActions.count=e.validateNumber(t,0))},{after:(0,a.w5)((()=>[(0,a.Wm)(r,{push:"",icon:e.monster.legendaryActions.useCustomPreamble?"edit":"edit_off",color:e.monster.legendaryActions.useCustomPreamble?"warning":"dark",size:"md",onClick:t[0]||(t[0]=t=>e.monster.legendaryActions.useCustomPreamble=!e.monster.legendaryActions.useCustomPreamble)},{default:(0,a.w5)((()=>[(0,a.Wm)(i,{class:"text-body2"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,d.zw)(e.monster.legendaryActions.useCustomPreamble?e.$t("editor.legendary.useCustomPreamble"):e.$t("editor.legendary.useDefaultPreamble")),1)])),_:1})])),_:1},8,["icon","color"])])),_:1},8,["model-value","label"]),(0,a._)("div",Xa,[(0,a.Wm)(g,{color:0===e.filteredActions.length?"dark":"positive",label:0===e.filteredActions.length?e.$t("editor.legendary.none"):e.$t("editor.legendary.add"),disable:0===e.filteredActions.length,class:"full-width"},{default:(0,a.w5)((()=>[(0,a.Wm)(b,null,{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.filteredActions,(t=>(0,a.wy)(((0,a.wg)(),(0,a.j4)(k,{key:t.id,clickable:"",onClick:l=>e.addLegendary(t.id)},{default:(0,a.w5)((()=>[(0,a.Wm)(u,null,{default:(0,a.w5)((()=>[(0,a.Wm)(m,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,d.zw)(t.name),1)])),_:2},1024)])),_:2},1024),(0,a.Wm)(u,{side:"",top:""},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{color:"attack"===t.typeInternal?"red-10":"amber-10",label:t.type},null,8,["color","label"])])),_:2},1024)])),_:2},1032,["onClick"])),[[W]]))),128))])),_:1})])),_:1},8,["color","label","disable"])]),(0,a.Wm)(w,null,{default:(0,a.w5)((()=>[(0,a.wy)((0,a._)("div",Ja,[(0,a.Wm)(f,{field:e.monster.legendaryActions.customPreamble,"i18n-label-key":"editor.legendary.preamble","show-reset":!0,"token-category":"legendary","onUpdate:modelValue":t[2]||(t[2]=t=>e.monster.legendaryActions.customPreamble=t),onReset:t[3]||(t[3]=t=>e.monster.legendaryActions.customPreamble=e.$t("presets.legendaryActions"))},null,8,["field"])],512),[[S.F8,e.monster.legendaryActions.useCustomPreamble]])])),_:1})])),_:1}),(0,a.Wm)(v,{class:"row"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.monster.legendaryActions.actions,(t=>((0,a.wg)(),(0,a.iD)(a.HY,{key:t.actionId},[(0,a._)("div",eo,(0,d.zw)(e.monster.legendaryActionName(t.actionId)),1),(0,a._)("div",to,[(0,a.Wm)(c,{"model-value":t.cost,type:"number",min:"0",label:e.$t("editor.legendary.cost"),"onUpdate:modelValue":l=>t.cost=e.validateNumber(l,1)},{after:(0,a.w5)((()=>[(0,a.Wm)(r,{push:"",color:"negative",icon:"delete",onClick:()=>e.monster.deleteLegendaryAction(t.actionId)},{default:(0,a.w5)((()=>[(0,a.Wm)(i,{class:"text-body2"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,d.zw)(e.$t("editor.delete")),1)])),_:1})])),_:2},1032,["onClick"])])),_:2},1032,["model-value","label","onUpdate:modelValue"])])],64)))),128))])),_:1})])),_:1})])),_:1},8,["label","caption"])}const ao=(0,a.aZ)({name:"LegendaryActionsEditor",components:{MonsterTextEditor:ml},setup(){const e=(0,i.B)(),t=t=>{e.addLegendaryAction(t)},l=(0,a.Fl)((()=>{const t=e.attacksAndActions,l=t.filter((t=>null==e.legendaryActions.actions.find((e=>e.actionId===t.id))));return l}));return{monster:e,filteredActions:l,addLegendary:t,validateNumber:Z.m}}}),oo=(0,y.Z)(ao,[["render",lo]]),no=oo;q()(ao,"components",{QExpansionItem:U.Z,QCard:D.Z,QCardSection:Vt.Z,QInput:A.Z,QBtn:_.Z,QTooltip:W.Z,QBtnDropdown:St.Z,QList:zt.Z,QItem:Ft.Z,QItemSection:Ht.Z,QItemLabel:Ot.Z,QBadge:aa.Z,QSlideTransition:_l.Z}),q()(ao,"directives",{ClosePopup:Lt.Z});const so={class:"col-12 q-pa-sm"},io={class:"col-12 q-pa-sm"},ro={class:"col-12 q-pa-sm flex items-center"},co={class:"col-8 text-h6 flex items-center"},mo={class:"col-4"};function uo(e,t,l,o,n,s){const i=(0,a.up)("q-input"),r=(0,a.up)("monster-text-editor"),c=(0,a.up)("q-card-section"),m=(0,a.up)("q-item-label"),u=(0,a.up)("q-item-section"),p=(0,a.up)("q-badge"),k=(0,a.up)("q-item"),b=(0,a.up)("q-list"),g=(0,a.up)("q-btn-dropdown"),f=(0,a.up)("q-tooltip"),w=(0,a.up)("q-btn"),v=(0,a.up)("q-card"),y=(0,a.up)("q-expansion-item"),_=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.j4)(y,{"expand-separator":"",icon:"fa-solid fa-building-columns",label:e.$t("editor.mythic.label"),caption:e.$t("editor.mythic.caption")},{default:(0,a.w5)((()=>[(0,a.Wm)(v,null,{default:(0,a.w5)((()=>[(0,a.Wm)(c,{class:"row"},{default:(0,a.w5)((()=>[(0,a.Wm)(i,{modelValue:e.monster.mythicActions.triggerName,"onUpdate:modelValue":t[0]||(t[0]=t=>e.monster.mythicActions.triggerName=t),label:e.$t("editor.mythic.traitName"),class:"col-6 q-pa-sm"},null,8,["modelValue","label"]),(0,a.Wm)(i,{modelValue:e.monster.mythicActions.triggerRecharge,"onUpdate:modelValue":t[1]||(t[1]=t=>e.monster.mythicActions.triggerRecharge=t),label:e.$t("editor.mythic.recharge"),class:"col-6 q-pa-sm"},null,8,["modelValue","label"]),(0,a._)("div",so,[(0,a.Wm)(r,{field:e.monster.mythicActions.triggerDescription,"i18n-label-key":"editor.mythic.description","show-reset":!0,"onUpdate:modelValue":t[2]||(t[2]=t=>e.monster.mythicActions.triggerDescription=t),onReset:t[3]||(t[3]=t=>e.monster.mythicActions.triggerDescription=e.$t("presets.mythicDescription"))},null,8,["field"])]),(0,a._)("div",io,[(0,a.Wm)(r,{field:e.monster.mythicActions.preamble,"i18n-label-key":"editor.mythic.preamble","show-reset":!0,"onUpdate:modelValue":t[4]||(t[4]=t=>e.monster.mythicActions.preamble=t),onReset:t[5]||(t[5]=t=>e.monster.mythicActions.preamble=e.$t("presets.mythicPreamble"))},null,8,["field"])])])),_:1}),(0,a.Wm)(c,{class:"row"},{default:(0,a.w5)((()=>[(0,a._)("div",ro,[(0,a.Wm)(g,{color:0===e.filteredActions.length?"dark":"positive",label:0===e.filteredActions.length?e.$t("editor.legendary.none"):e.$t("editor.mythic.add"),disable:0===e.filteredActions.length,class:"full-width"},{default:(0,a.w5)((()=>[(0,a.Wm)(b,null,{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.filteredActions,(t=>(0,a.wy)(((0,a.wg)(),(0,a.j4)(k,{key:t.id,clickable:"",onClick:l=>e.monster.addMythicAction(t.id)},{default:(0,a.w5)((()=>[(0,a.Wm)(u,null,{default:(0,a.w5)((()=>[(0,a.Wm)(m,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,d.zw)(t.name),1)])),_:2},1024)])),_:2},1024),(0,a.Wm)(u,{side:"",top:""},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{color:"attack"===t.typeInternal?"red-10":"amber-10",label:t.type},null,8,["color","label"])])),_:2},1024)])),_:2},1032,["onClick"])),[[_]]))),128))])),_:1})])),_:1},8,["color","label","disable"])]),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.monster.mythicActions.actions,(t=>((0,a.wg)(),(0,a.iD)(a.HY,{key:t.actionId},[(0,a._)("div",co,(0,d.zw)(e.monster.legendaryActionName(t.actionId)),1),(0,a._)("div",mo,[(0,a.Wm)(i,{"model-value":t.cost,type:"number",min:"0",label:e.$t("editor.legendary.cost"),"onUpdate:modelValue":l=>t.cost=e.validateNumber(l,1)},{after:(0,a.w5)((()=>[(0,a.Wm)(w,{push:"",color:"negative",icon:"delete",onClick:()=>e.monster.deleteMythicAction(t.actionId)},{default:(0,a.w5)((()=>[(0,a.Wm)(f,{class:"text-body2"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,d.zw)(e.$t("editor.delete")),1)])),_:1})])),_:2},1032,["onClick"])])),_:2},1032,["model-value","label","onUpdate:modelValue"])])],64)))),128))])),_:1})])),_:1})])),_:1},8,["label","caption"])}const po=(0,a.aZ)({name:"MythicActionsEditor",components:{MonsterTextEditor:ml},setup(){const e=(0,i.B)(),t=(0,a.Fl)((()=>{const t=e.attacksAndActions,l=t.filter((t=>null==e.mythicActions.actions.find((e=>e.actionId===t.id))));return l}));return{monster:e,filteredActions:t,validateNumber:Z.m}}}),ko=(0,y.Z)(po,[["render",uo]]),bo=ko;function go(e,t,l,o,n,s){const i=(0,a.up)("q-input"),r=(0,a.up)("monster-text-editor"),d=(0,a.up)("q-card-section"),c=(0,a.up)("q-btn"),m=(0,a.up)("q-card-actions"),u=(0,a.up)("q-card"),p=(0,a.up)("q-expansion-item"),k=(0,a.up)("q-list");return(0,a.wg)(),(0,a.j4)(p,{"expand-separator":"",icon:"mdi-account-reactivate",label:e.$t("editor.reaction.label")},{default:(0,a.w5)((()=>[(0,a.Wm)(u,null,{default:(0,a.w5)((()=>[(0,a.Wm)(d,{class:"row"},{default:(0,a.w5)((()=>[(0,a.Wm)(k,{bordered:"",separator:"",class:"rounded-borders bg-blue-10 full-width"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.monster.reactions,(t=>((0,a.wg)(),(0,a.j4)(p,{key:t.id,label:t.name,"expand-separator":""},{default:(0,a.w5)((()=>[(0,a.Wm)(u,null,{default:(0,a.w5)((()=>[(0,a.Wm)(d,{class:"row"},{default:(0,a.w5)((()=>[(0,a.Wm)(i,{modelValue:t.name,"onUpdate:modelValue":e=>t.name=e,label:e.$t("monster.trait.name"),class:"col-12 q-pa-sm"},null,8,["modelValue","onUpdate:modelValue","label"]),(0,a.Wm)(r,{field:t.description,"i18n-label-key":"monster.trait.description","onUpdate:modelValue":e=>{t.description=e}},null,8,["field","onUpdate:modelValue"])])),_:2},1024),(0,a.Wm)(m,{align:"center"},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{color:"negative",class:"full-width",label:e.$t("editor.reaction.delete"),onClick:()=>e.monster.deleteReaction(t.id)},null,8,["label","onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1032,["label"])))),128))])),_:1})])),_:1}),(0,a.Wm)(m,{align:"center"},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{color:"positive",class:"full-width",label:e.$t("editor.reaction.add"),onClick:e.monster.addReaction},null,8,["label","onClick"])])),_:1})])),_:1})])),_:1},8,["label"])}q()(po,"components",{QExpansionItem:U.Z,QCard:D.Z,QCardSection:Vt.Z,QInput:A.Z,QBtnDropdown:St.Z,QList:zt.Z,QItem:Ft.Z,QItemSection:Ht.Z,QItemLabel:Ot.Z,QBadge:aa.Z,QBtn:_.Z,QTooltip:W.Z}),q()(po,"directives",{ClosePopup:Lt.Z});const fo=(0,a.aZ)({name:"ReactionsEditor",components:{MonsterTextEditor:ml},setup(){const e=(0,i.B)();return{monster:e}}}),wo=(0,y.Z)(fo,[["render",go]]),vo=wo;q()(fo,"components",{QExpansionItem:U.Z,QCard:D.Z,QCardSection:Vt.Z,QList:zt.Z,QInput:A.Z,QCardActions:Ut.Z,QBtn:_.Z});const yo={class:"col flex justify-start items-center"},_o={class:"col-2 flex justify-end items-center"},Wo={class:"col-12 q-pa-sm"},Co={class:"col-12"};function qo(e,t,l,o,n,s){const i=(0,a.up)("q-tooltip"),r=(0,a.up)("q-btn"),c=(0,a.up)("monster-text-editor"),m=(0,a.up)("q-slide-transition"),u=(0,a.up)("q-card-section"),p=(0,a.up)("cr-annotation-card"),k=(0,a.up)("q-card-actions"),b=(0,a.up)("q-card"),g=(0,a.up)("q-expansion-item"),f=(0,a.up)("q-list");return(0,a.wg)(),(0,a.j4)(g,{"expand-separator":"",icon:"home",label:e.$t("editor.lair.label"),caption:e.$t("editor.lair.caption")},{default:(0,a.w5)((()=>[(0,a.Wm)(b,null,{default:(0,a.w5)((()=>[(0,a.Wm)(u,{class:"row"},{default:(0,a.w5)((()=>[(0,a._)("div",yo,(0,d.zw)(e.$t("editor.lair.help")),1),(0,a._)("div",_o,[(0,a.Wm)(r,{push:"",icon:e.monster.useCustomLairActionPreamble?"edit":"edit_off",color:e.monster.useCustomLairActionPreamble?"warning":"dark",size:"md",onClick:t[0]||(t[0]=t=>e.monster.useCustomLairActionPreamble=!e.monster.useCustomLairActionPreamble)},{default:(0,a.w5)((()=>[(0,a.Wm)(i,{class:"text-body2"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,d.zw)(e.monster.useCustomLairActionPreamble?e.$t("editor.lair.useCustom"):e.$t("editor.lair.useDefault")),1)])),_:1})])),_:1},8,["icon","color"])]),(0,a.Wm)(m,null,{default:(0,a.w5)((()=>[(0,a.wy)((0,a._)("div",Wo,[(0,a.Wm)(c,{field:e.monster.lairActionPreamble,"i18n-label-key":"editor.lair.preamble","show-reset":!0,"onUpdate:modelValue":t[1]||(t[1]=t=>e.monster.lairActionPreamble=t),onReset:t[2]||(t[2]=t=>e.monster.lairActionPreamble=e.$t("presets.lair"))},null,8,["field"])],512),[[S.F8,e.monster.useCustomLairActionPreamble]])])),_:1})])),_:1}),(0,a.Wm)(u,{class:"row"},{default:(0,a.w5)((()=>[(0,a._)("div",Co,[(0,a.Wm)(f,{bordered:"",separator:"",class:"rounded-borders bg-blue-10 full-width"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.monster.lairActions,((t,l)=>((0,a.wg)(),(0,a.j4)(g,{key:t.id,label:e.$t("editor.lair.actionItem",[l+1]),"expand-separator":""},{default:(0,a.w5)((()=>[(0,a.Wm)(b,null,{default:(0,a.w5)((()=>[(0,a.Wm)(u,{class:"row"},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{field:t.description,"i18n-label-key":"monster.trait.description","onUpdate:modelValue":l=>{t.description=l,e.autoUpdateCr(t.description,t.crAnnotation)}},null,8,["field","onUpdate:modelValue"]),(0,a.Wm)(p,{field:"lairActions",index:l},null,8,["index"])])),_:2},1024),(0,a.Wm)(k,{align:"center"},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{color:"negative",class:"full-width",label:e.$t("editor.lair.delete"),onClick:()=>e.monster.deleteLairAction(t.id)},null,8,["label","onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1032,["label"])))),128))])),_:1})])])),_:1}),(0,a.Wm)(k,{align:"center"},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{color:"positive",class:"full-width",label:e.$t("editor.lair.add"),onClick:e.monster.addLairAction},null,8,["label","onClick"])])),_:1})])),_:1})])),_:1},8,["label","caption"])}const $o=(0,a.aZ)({name:"LairActionsEditor",components:{MonsterTextEditor:ml,CrAnnotationCard:ql},setup(){const e=(0,i.B)(),{autoUpdateCr:t}=ul();return{monster:e,autoUpdateCr:t}}}),ho=(0,y.Z)($o,[["render",qo]]),Zo=ho;q()($o,"components",{QExpansionItem:U.Z,QCard:D.Z,QCardSection:Vt.Z,QBtn:_.Z,QTooltip:W.Z,QSlideTransition:_l.Z,QList:zt.Z,QCardActions:Ut.Z});const Vo={class:"col-12 flex justify-start items-center"},Uo={class:"col-12 q-pa-sm"},Do={class:"col-12"};function Ao(e,t,l,o,n,s){const i=(0,a.up)("monster-text-editor"),r=(0,a.up)("q-card-section"),c=(0,a.up)("q-btn"),m=(0,a.up)("q-card-actions"),u=(0,a.up)("q-card"),p=(0,a.up)("q-expansion-item"),k=(0,a.up)("q-list");return(0,a.wg)(),(0,a.j4)(p,{"expand-separator":"",icon:"public",label:e.$t("editor.regional.label")},{default:(0,a.w5)((()=>[(0,a.Wm)(u,null,{default:(0,a.w5)((()=>[(0,a.Wm)(r,{class:"row"},{default:(0,a.w5)((()=>[(0,a._)("div",Vo,(0,d.zw)(e.$t("editor.regional.help")),1),(0,a._)("div",Uo,[(0,a.Wm)(i,{field:e.monster.regionalEffectDescription,"i18n-label-key":"editor.regional.preamble","show-reset":!0,"onUpdate:modelValue":t[0]||(t[0]=t=>e.monster.regionalEffectDescription=t),onReset:t[1]||(t[1]=t=>e.monster.regionalEffectDescription=e.$t("presets.regional"))},null,8,["field"])])])),_:1}),(0,a.Wm)(r,{class:"row"},{default:(0,a.w5)((()=>[(0,a._)("div",Do,[(0,a.Wm)(k,{bordered:"",separator:"",class:"rounded-borders bg-blue-10 full-width"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.monster.regionalEffects,((t,l)=>((0,a.wg)(),(0,a.j4)(p,{key:t.id,label:e.$t("editor.regional.effectItem",[l+1]),"expand-separator":""},{default:(0,a.w5)((()=>[(0,a.Wm)(u,null,{default:(0,a.w5)((()=>[(0,a.Wm)(r,{class:"row"},{default:(0,a.w5)((()=>[(0,a.Wm)(i,{field:t.description,"i18n-label-key":"monster.trait.description","onUpdate:modelValue":e=>{t.description=e}},null,8,["field","onUpdate:modelValue"])])),_:2},1024),(0,a.Wm)(m,{align:"center"},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{color:"negative",class:"full-width",label:e.$t("editor.regional.delete"),onClick:()=>e.monster.deleteRegionalEffect(t.id)},null,8,["label","onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1032,["label"])))),128))])),_:1})])])),_:1}),(0,a.Wm)(m,{align:"center"},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{color:"positive",class:"full-width",label:e.$t("editor.regional.add"),onClick:e.monster.addRegionalEffect},null,8,["label","onClick"])])),_:1})])),_:1})])),_:1},8,["label"])}const xo=(0,a.aZ)({name:"RegionalEffectsEditor",components:{MonsterTextEditor:ml},setup(){const e=(0,i.B)();return{monster:e}}}),Qo=(0,y.Z)(xo,[["render",Ao]]),To=Qo;q()(xo,"components",{QExpansionItem:U.Z,QCard:D.Z,QCardSection:Vt.Z,QList:zt.Z,QCardActions:Ut.Z,QBtn:_.Z});const So=(0,a.aZ)({name:"MonsterBuilder",components:{BasicsEditor:T,WebRenderer:gt,SavesEditor:Wt,SpeedsEditor:At,SkillsEditor:Et,SensesEditor:Nt,ResistancesEditor:el,TraitsEditor:Il,SpellcastingEditor:_a,AttacksEditor:Qa,MultiattackEditor:Ra,ActionsEditor:Ga,LegendaryActionsEditor:no,MythicActionsEditor:bo,ReactionsEditor:vo,LairActionsEditor:Zo,RegionalEffectsEditor:To},setup(){const e=(0,r.iH)(66),t=(0,i.B)();return{splitterModel:e,monster:t}}});var zo=l(9885),Fo=l(7498);const Ho=(0,y.Z)(So,[["render",s]]),Oo=Ho;q()(So,"components",{QPage:zo.Z,QSplitter:Fo.Z,QList:zt.Z})}}]);