"use strict";(globalThis["webpackChunk_5e_monster_maker"]=globalThis["webpackChunk_5e_monster_maker"]||[]).push([[28],{8028:(e,t,l)=>{l.r(t),l.d(t,{default:()=>M});var a=l(9835),o=l(6970),i=l(1957);const n={class:"text-h6"},m={href:"https://quasar.dev/vue-components/icon#webfont-usage",target:"_blank"},r={href:"https://fonts.google.com/icons?selected=Material+Icons&icon.style=Filled",target:"_blank"},p={href:"https://materialdesignicons.com/",target:"_blank"},s={href:"https://fontawesome.com/search?m=free",target:"_blank"};function d(e,t,l,d,c,u){const w=(0,a.up)("q-space"),g=(0,a.up)("q-btn"),f=(0,a.up)("q-checkbox"),b=(0,a.up)("q-td"),k=(0,a.up)("q-badge"),_=(0,a.up)("q-icon"),v=(0,a.up)("i18n-t"),y=(0,a.up)("q-input"),q=(0,a.up)("q-popup-edit"),h=(0,a.up)("q-tr"),Z=(0,a.up)("q-table"),W=(0,a.up)("q-page");return(0,a.wg)(),(0,a.j4)(W,{style:{"min-height":"calc(100vh - 120px)"}},{default:(0,a.w5)((()=>[(0,a.Wm)(Z,{selected:e.selected,"onUpdate:selected":t[0]||(t[0]=t=>e.selected=t),title:e.$t("editor.template.title"),rows:e.templates,columns:e.columns,pagination:{rowsPerPage:15},"row-key":"name",class:"q-mx-auto q-my-md",selection:"multiple",style:{width:"98vw"}},{top:(0,a.w5)((()=>[(0,a._)("div",n,(0,o.zw)(e.$t("editor.template.title")),1),(0,a.Wm)(w),(0,a.wy)((0,a.Wm)(g,{color:"negative",class:"q-mr-md",onClick:e.deleteTemplates},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(e.$t("editor.template.delete",e.selected.length)),1)])),_:1},8,["onClick"]),[[i.F8,0!==e.selected.length]]),(0,a.Wm)(g,{color:"primary",class:"q-mr-md",onClick:e.importTemplates},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(e.$t("editor.template.import")),1)])),_:1},8,["onClick"]),(0,a.Wm)(g,{color:"primary",class:"q-mr-md",onClick:e.downloadTemplates},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(e.$t("editor.template.export")),1)])),_:1},8,["onClick"])])),body:(0,a.w5)((t=>[(0,a.Wm)(h,{props:t},{default:(0,a.w5)((()=>[(0,a.Wm)(b,null,{default:(0,a.w5)((()=>[(0,a.Wm)(f,{modelValue:t.selected,"onUpdate:modelValue":e=>t.selected=e},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),(0,a.Wm)(b,{key:"templateName",props:t},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(t.row.templateName),1)])),_:2},1032,["props"]),(0,a.Wm)(b,{key:"type",props:t},{default:(0,a.w5)((()=>[(0,a.Wm)(k,{color:e.actionColor[t.row.type]},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(e.$t(`editor.template.type.${t.row.type}`)),1)])),_:2},1032,["color"])])),_:2},1032,["props"]),(0,a.Wm)(b,{key:"name",props:t},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(t.row.name),1)])),_:2},1032,["props"]),(0,a.Wm)(b,{key:"icon",props:t,class:"editable"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(t.row.icon)+" ",1),(0,a.Wm)(_,{name:t.row.icon,size:"2em",class:"q-ml-sm"},null,8,["name"]),(0,a.Wm)(q,{modelValue:t.row.icon,"onUpdate:modelValue":e=>t.row.icon=e,"auto-save":"",title:e.$t("editor.template.icon")},{default:(0,a.w5)((t=>[(0,a.Wm)(y,{modelValue:t.value,"onUpdate:modelValue":e=>t.value=e,label:e.$t("editor.template.icon"),"bottom-slots":"",class:"q-mb-xl"},{hint:(0,a.w5)((()=>[(0,a.Wm)(v,{keypath:"editor.template.availableIcons"},{default:(0,a.w5)((()=>[(0,a._)("a",m,(0,o.zw)(e.$t("editor.template.link0")),1),(0,a._)("a",r,(0,o.zw)(e.$t("editor.template.link1")),1),(0,a._)("a",p,(0,o.zw)(e.$t("editor.template.link2")),1),(0,a._)("a",s,(0,o.zw)(e.$t("editor.template.link3")),1)])),_:1})])),after:(0,a.w5)((()=>[(0,a.Wm)(_,{name:t.value,class:"overflow-hidden"},null,8,["name"])])),_:2},1032,["modelValue","onUpdate:modelValue","label"])])),_:2},1032,["modelValue","onUpdate:modelValue","title"])])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:1},8,["selected","title","rows","columns"])])),_:1})}var c=l(9302),u=l(499),w=l(7712),g=l(593),f=l(3882),b=l(466);const k={class:"text-h6"},_={class:"col-6 flex items-center"},v={class:"col-6 flex items-center"};function y(e,t,l,i,n,m){const r=(0,a.up)("q-card-section"),p=(0,a.up)("q-separator"),s=(0,a.up)("q-file"),d=(0,a.up)("q-toggle"),c=(0,a.up)("q-tooltip"),u=(0,a.up)("q-btn"),w=(0,a.up)("q-card-actions"),g=(0,a.up)("q-card"),f=(0,a.up)("q-dialog");return(0,a.wg)(),(0,a.j4)(f,{ref:"dialogRef",onHide:e.onDialogHide},{default:(0,a.w5)((()=>[(0,a.Wm)(g,{class:"q-dialog-plugin import-spell-dialog"},{default:(0,a.w5)((()=>[(0,a.Wm)(r,null,{default:(0,a.w5)((()=>[(0,a._)("div",k,(0,o.zw)(e.$t("editor.template.importDialog")),1)])),_:1}),(0,a.Wm)(p),(0,a.Wm)(r,{class:"row"},{default:(0,a.w5)((()=>[(0,a.Wm)(s,{modelValue:e.file,"onUpdate:modelValue":t[0]||(t[0]=t=>e.file=t),class:"q-pa-md col-12",label:e.$t("editor.template.importFile"),accept:".5emmt.json"},null,8,["modelValue","label"]),(0,a._)("div",_,[(0,a.Wm)(d,{modelValue:e.overwrite,"onUpdate:modelValue":t[1]||(t[1]=t=>e.overwrite=t),label:e.$t("editor.template.importMode")},null,8,["modelValue","label"])]),(0,a._)("div",v,[(0,a.Wm)(d,{modelValue:e.isV1,"onUpdate:modelValue":t[2]||(t[2]=t=>e.isV1=t),label:e.$t("editor.template.legacyImport")},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{class:"text-body2"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(e.$t("editor.template.legacyImportHint")),1)])),_:1})])),_:1},8,["modelValue","label"])])])),_:1}),(0,a.Wm)(w,{align:"right"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{color:"green",label:e.$t("editor.template.import"),disabled:null==e.file,onClick:e.onOKClick},null,8,["label","disabled","onClick"]),(0,a.Wm)(u,{color:"primary",label:e.$t("editor.cancel"),onClick:e.onCancelClick},null,8,["label","onClick"])])),_:1})])),_:1})])),_:1},8,["onHide"])}var q=l(4182);const h=(0,a.aZ)({name:"LoadSpellsDialog",emits:[...q.Z.emits],setup(){const{dialogRef:e,onDialogHide:t,onDialogOK:l,onDialogCancel:a}=(0,q.Z)(),o=(0,c.Z)(),{t:i}=(0,w.QT)(),n=(0,f.Z)(),m=(0,u.iH)(),r=(0,u.iH)(!1),p=(0,u.iH)(!1),s=()=>{if(null!=m.value){const e=new FileReader;e.addEventListener("load",(e=>{try{const t=JSON.parse(e.target?.result),l=Object.values(t);p.value&&(console.log("found v1 templates, updating..."),(0,f.v)(l));const a=n.import(l,r.value);o.notify({message:i("editor.template.importResult",{n:a.imported},a.imported),type:"positive"}),a.skipped>0&&o.notify({message:i("editor.template.importSkip",{n:a.skipped},a.skipped),type:"warning"})}catch(e){o.notify({message:i("editor.template.importError",[e]),type:"negative"}),console.error(e)}})),e.addEventListener("error",(e=>{o.notify({message:i("editor.template.importError",[e]),type:"negative"}),console.error(e)})),e.readAsText(m.value)}};return{dialogRef:e,onDialogHide:t,onOKClick(){s(),l()},onCancelClick:a,templateStore:n,file:m,overwrite:r,isV1:p}}});var Z=l(1639),W=l(2074),C=l(4458),V=l(3190),Q=l(926),T=l(3837),$=l(3175),U=l(6858),z=l(1821),x=l(8879),H=l(9984),S=l.n(H);const D=(0,Z.Z)(h,[["render",y]]),N=D;S()(h,"components",{QDialog:W.Z,QCard:C.Z,QCardSection:V.Z,QSeparator:Q.Z,QFile:T.Z,QToggle:$.Z,QTooltip:U.Z,QCardActions:z.Z,QBtn:x.Z});const j=(0,a.aZ)({name:"SpellsEditor",setup(){const{t:e}=(0,w.QT)(),t=(0,c.Z)(),l=(0,f.Z)(),o=(0,a.Fl)((()=>Object.values(l.customTemplates))),i=(0,u.iH)([]),n=[{name:"templateName",field:"templateName",required:!0,label:e("editor.template.name"),align:"left",sortable:!0},{name:"type",field:"type",label:e("editor.template.type.type"),sortable:!0},{name:"name",field:"name",required:!0,label:e("editor.template.instanceName"),align:"left",sortable:!0},{name:"icon",label:e("editor.template.icon"),sortable:!0,field:"icon",align:"left"}],m=()=>{i.value.forEach((e=>l.deleteCustomTemplate(e.templateName))),i.value=[]},r=()=>{(0,g.L)(JSON.stringify(l.customTemplates),"custom-templates.5emmt.json","application/json")},p=()=>{t.dialog({component:N})};return{columns:n,selected:i,templates:o,downloadTemplates:r,deleteTemplates:m,subtitles:(0,a.Fl)((()=>l.allTemplateSubtitles)),actionColor:b.z,importTemplates:p}}});var E=l(9885),F=l(953),I=l(136),O=l(9546),R=l(7220),L=l(1221),P=l(990),B=l(2857),K=l(9843),A=l(3119);const J=(0,Z.Z)(j,[["render",d],["__scopeId","data-v-24c9d8ba"]]),M=J;S()(j,"components",{QPage:E.Z,QTable:F.Z,QSpace:I.Z,QBtn:x.Z,QTr:O.Z,QTd:R.Z,QCheckbox:L.Z,QBadge:P.Z,QIcon:B.Z,QPopupEdit:K.Z,QInput:A.Z})}}]);